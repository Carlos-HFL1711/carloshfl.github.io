<DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quadros de Segurança | Carlos Henrique — Experimentos</title>

<!-- ======================================================================
     TEMA / RESETAÇO
     ====================================================================== -->
<style>
:root{
  /* mesma paleta */
  --bg:#070b16; --card:#10183b; --surface:#0d1534;
  --text:#eaf2ff; --muted:#9bb0d3; --accent:#20d3ff; --brand:#7c4dff;
  --border:rgba(255,255,255,.10); --shadow:0 18px 40px rgba(0,0,0,.38);

  --ok:#19c37d; --warn:#ffd166; --bad:#ff6363;
  --header-h:64px;

  /* Safe areas iOS */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bot: env(safe-area-inset-bottom, 0px);
}

*,
*::before,
*::after{ box-sizing:border-box; }
html{ scroll-behavior:smooth; }
html, body{ overflow-x:hidden; touch-action:pan-y; overscroll-behavior-x:none; min-height:100%; }
body{
  margin:0; color:var(--text); font-family:"Segoe UI",system-ui,-apple-system,Arial,sans-serif;
  background:
    radial-gradient(1200px 700px at 10% 10%, rgba(124,77,255,.18), transparent 60%),
    radial-gradient(900px 600px at 90% 90%, rgba(32,211,255,.12), transparent 60%),
    var(--bg);
  padding-bottom: var(--safe-bot);
  -webkit-tap-highlight-color: transparent;
}

.container{ max-width:1220px; margin:0 auto; padding:0 16px; }
.muted{ color:var(--muted); }
.small{ font-size:.92rem; }
code{ padding:2px 6px; border-radius:6px; background:rgba(255,255,255,.06); border:1px solid var(--border); }

.hidden{ display:none !important; }

/* ======================================================================
   HEADER
   ====================================================================== */
header{
  position:sticky; top:0; z-index:40;
  background:rgba(7,11,22,.60);
  border-bottom:1px solid rgba(255,255,255,.06);
  backdrop-filter:saturate(120%) blur(8px);
  padding-top: var(--safe-top);
}
.nav{ display:flex; align-items:center; justify-content:space-between; padding:12px 0; gap:10px; }
.logo{
  font-weight:900; letter-spacing:.2px;
  background:linear-gradient(90deg,var(--brand),var(--accent) 60%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.badge-h{ padding:6px 10px; border-radius:999px; border:1px solid var(--border);
  background:rgba(124,77,255,.16); color:var(--accent); font-weight:900; }

#scrollbar{
  position:absolute; left:0; bottom:-1px; height:3px; width:0%;
  background:linear-gradient(90deg,var(--brand),var(--accent));
  box-shadow:0 0 12px rgba(32,211,255,.45);
}

/* ======================================================================
   SEÇÃO / TÍTULOS
   ====================================================================== */
.section{ padding:48px 0; opacity:0; transform:translateY(24px); transition:opacity .55s ease, transform .55s ease; }
.section.show{ opacity:1; transform:none; }

.hero-line{
  height:3px; border-radius:999px; margin:12px 0 18px;
  background:linear-gradient(90deg,var(--brand),var(--accent));
  box-shadow:0 0 18px rgba(32,211,255,.45), 0 0 24px rgba(124,77,255,.35);
  animation:pulseGlow 3s ease-in-out infinite;
}
@keyframes pulseGlow { 0%,100%{opacity:.95} 50%{opacity:.55} }

/* ======================================================================
   GRID & CARDS BASE
   ====================================================================== */
.grid{ display:grid; gap:16px; grid-template-columns:repeat(3,1fr); }
@media (max-width:1100px){ .grid{ grid-template-columns:repeat(2,1fr); } }
@media (max-width:760px){ .grid{ grid-template-columns:1fr; } }

.card{
  position:relative; background:var(--card); border:1px solid var(--border);
  border-radius:16px; overflow:hidden; box-shadow:var(--shadow);
  transform:translateY(8px); opacity:0; animation:cardIn .6s ease forwards;
}
@keyframes cardIn{ to{ transform:none; opacity:1; } }
.card .head{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px 14px; flex-wrap:wrap }
.card .head h3{ margin:0; }
.card .head .badge{
  font-size:.8rem; font-weight:900; padding:6px 10px; border-radius:999px;
  border:1px solid var(--border); background:rgba(124,77,255,.16); color:var(--accent);
}

/* Palco animado (substitui as fotos) */
.stage{
  position:relative; height:260px; overflow:hidden;
  background:
    radial-gradient(1200px 400px at 50% 0%, rgba(32,211,255,.07), transparent 60%),
    linear-gradient(135deg,#0d1638,#141e47);
  border-top:1px solid rgba(255,255,255,.06);
  border-bottom:1px solid rgba(255,255,255,.06);
  min-height: 220px; /* garante algo visível no mobile antigo */
  isolation:isolate;
}
.stage::before{
  content:""; position:absolute; inset:0; pointer-events:none;
  background: conic-gradient(from 0deg at 50% 50%, rgba(124,77,255,.12), transparent 20%, rgba(32,211,255,.12) 40%, transparent 60%, rgba(124,77,255,.12) 80%, transparent 100%);
  animation:spinGlow 12s linear infinite; mix-blend-mode:screen; opacity:.35;
}
@keyframes spinGlow{ to{ transform:rotate(360deg) } }
.stage .kit{ position:absolute; left:10px; right:10px; bottom:10px; display:flex; gap:8px; flex-wrap:wrap; z-index:3; }
.tag{ font-size:.75rem; font-weight:800; padding:6px 8px; border-radius:999px; border:1px solid var(--border); background:var(--surface); color:var(--text); }
.tag:nth-child(odd){ background:rgba(124,77,255,.20) }
.tag:nth-child(even){ background:rgba(32,211,255,.16) }
.pulse{ animation:pulse 1.8s infinite } @keyframes pulse{ 0%,100%{opacity:1} 50%{opacity:.45} }

.term{
  background:#0b122e; color:#cfe0ff; border:1px solid rgba(255,255,255,.09);
  border-radius:12px; padding:10px; font:13px ui-monospace,Consolas,Menlo,monospace;
  height:160px; overflow:auto;
}
.ok{ color:var(--ok) } .warn{ color:var(--warn) } .bad{ color:var(--bad) }

/* Estrelinhas do palco */
.stars, .stars2, .stars3{
  position:absolute; inset:-50% -10% -10% -10%; background-repeat:repeat;
  background-size: auto; z-index:0;
}
.stars{ background-image: radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,.25), transparent 60%),
                         radial-gradient(1px 1px at 80px 120px, rgba(255,255,255,.18), transparent 60%),
                         radial-gradient(1.2px 1.2px at 130px 80px, rgba(255,255,255,.20), transparent 60%);
         animation:float1 60s linear infinite; opacity:.35; }
.stars2{ background-image: radial-gradient(1.2px 1.2px at 40px 60px, rgba(255,255,255,.18), transparent 60%),
                          radial-gradient(1.5px 1.5px at 120px 90px, rgba(255,255,255,.15), transparent 60%),
                          radial-gradient(1px 1px at 220px 140px, rgba(255,255,255,.14), transparent 60%);
          animation:float2 90s linear infinite; opacity:.25; }
.stars3{ background-image: radial-gradient(1px 1px at 10px 20px, rgba(255,255,255,.12), transparent 60%),
                          radial-gradient(1px 1px at 60px 40px, rgba(255,255,255,.10), transparent 60%),
                          radial-gradient(1px 1px at 90px 10px, rgba(255,255,255,.10), transparent 60%);
          animation:float3 120s linear infinite; opacity:.2; }
@keyframes float1 { to{ transform:translateY(120px) } }
@keyframes float2 { to{ transform:translateY(160px) } }
@keyframes float3 { to{ transform:translateY(220px) } }

/* Efeito de lanterna */
.sweep{ position:absolute; inset:0; pointer-events:none; background: radial-gradient(160px 160px at var(--x,50%) var(--y,50%), rgba(32,211,255,.10), transparent 60%); mix-blend-mode:screen; z-index:1 }

/* Botão flutuante utilitário */
.utils{ position:fixed; right:14px; bottom:18px; display:flex; flex-direction:column; gap:10px; z-index:60; }
.utils button{
  background:linear-gradient(90deg,var(--brand),var(--accent)); color:#0a1020; border:0; border-radius:999px; padding:10px 14px; font-weight:900; cursor:pointer;
  box-shadow:0 10px 24px rgba(32,211,255,.28);
  touch-action:manipulation;
}

/* ======================================================================
   CARDS ESPECÍFICOS
   ====================================================================== */

/* --------- Card 1: CÂMERAS ---------- */
.cams{
  position:absolute; inset:10px; display:grid; gap:10px;
  grid-template-columns:repeat(3, 1fr); grid-auto-rows:minmax(80px,1fr);
  z-index:2;
}
.cam{
  position:relative; border:1px solid rgba(255,255,255,.08); border-radius:12px;
  background:linear-gradient(180deg, rgba(9,14,38,.75), rgba(9,14,38,.55));
  overflow:hidden;
}
.cam .hdr{
  position:absolute; left:8px; top:8px; right:8px; display:flex; align-items:center; justify-content:space-between; gap:8px;
}
.cam .hdr .slot{ font-size:.68rem; font-weight:900; padding:4px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.12); background:rgba(0,0,0,.3) }
.cam .hdr .dot{ width:10px; height:10px; border-radius:50%; background:var(--ok); box-shadow:0 0 10px rgba(25,195,125,.8) }
.cam.off .hdr .dot{ background:var(--bad); box-shadow:0 0 12px rgba(255,99,99,.8) }

.cam .fx{ position:absolute; inset:0; overflow:hidden; }
.cam .scan{ position:absolute; left:0; right:0; height:3px; top:-3px;
  background:linear-gradient(90deg, transparent, #20d3ff, transparent); box-shadow:0 0 18px rgba(32,211,255,.6); opacity:.6 }
.cam .crt{ position:absolute; inset:0; background: repeating-linear-gradient( to bottom, rgba(255,255,255,.02) 0 2px, rgba(0,0,0,.02) 2px 4px ); mix-blend-mode:overlay; }
.cam .snow{ position:absolute; inset:-20% -20%; background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"></feTurbulence><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>'); opacity:.04; animation:snow 2.5s linear infinite; pointer-events:none }
@keyframes snow{ to{ transform:translate3d(-40px,40px,0) } }

.cam .hud{
  position:absolute; left:8px; bottom:8px; right:8px; display:flex; flex-wrap:wrap; gap:6px; align-items:center; font-size:.72rem;
}
.cam .hud .pill{ padding:4px 6px; border-radius:8px; background:rgba(124,77,255,.14); border:1px solid rgba(255,255,255,.1) }
.cam.off .hud .pill{ background:rgba(255,99,99,.14); border-color:rgba(255,99,99,.3) }
.signal{ width:40px; height:8px; border-radius:6px; overflow:hidden; background:rgba(255,255,255,.10); display:inline-grid; grid-template-columns:repeat(5,1fr); gap:2px; padding:1px }
.signal i{ display:block; border-radius:3px; background:#19c37d; opacity:.3 }
.signal i.on{ opacity:1 }

.cam .nosignal{
  position:absolute; right:10px; bottom:10px; transform:translateY(8px); opacity:0;
  padding:6px 10px; border-radius:999px; background:#ff4f88; color:#fff; font-weight:900;
  box-shadow:0 0 18px rgba(255,79,136,.6);
}
.cam.off .nosignal{ animation:ns .24s ease both }
@keyframes ns{ to{ transform:none; opacity:1 } }

/* --------- Card 2: COBRANÇA (chat) ---------- */
.device{
  position:absolute; inset:10px; border-radius:18px; border:1px solid rgba(255,255,255,.08); background:linear-gradient(180deg,#0f1944,#0b1334);
  display:grid; grid-template-rows:auto 1fr; z-index:2;
}
.bar{
  height:38px; display:flex; align-items:center; justify-content:space-between; gap:8px; padding:0 10px;
  border-bottom:1px solid rgba(255,255,255,.06); background:linear-gradient(180deg,rgba(255,255,255,.04),transparent);
}
.ind{ display:flex; align-items:center; gap:6px; }
.ind .light{ width:8px; height:8px; border-radius:50%; background:#19c37d; box-shadow:0 0 10px rgba(25,195,125,.8) }
.mode{ font-weight:900; padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:rgba(124,77,255,.16); color:var(--accent); cursor:pointer; touch-action:manipulation; }
.mode.on{ background:linear-gradient(90deg,var(--brand),var(--accent)); color:#0a1020; border-color:transparent; box-shadow:0 10px 24px rgba(32,211,255,.28); }

.chat{ padding:10px; overflow:auto; }
.bbl{ max-width:86%; padding:10px 12px; border-radius:14px; margin:4px 0; box-shadow:0 12px 24px rgba(0,0,0,.18); transform-origin:bottom left; }
.bbl.bot{ background:linear-gradient(180deg,#2a356b,#222d62); border:1px solid rgba(255,255,255,.06); }
.bbl.user{ background:linear-gradient(180deg,#21d6a0,#19c37d); color:#0a1020; font-weight:800; align-self:flex-end; transform-origin:bottom right; }
.bbl.mail{ background:linear-gradient(180deg,#263257,#1e2746); border:1px solid rgba(255,255,255,.06); }
.meta{ font-size:.72rem; opacity:.7; margin-top:4px }
.typing{ display:inline-grid; grid-auto-flow:column; gap:6px; }
.typing i{ width:7px; height:7px; border-radius:50%; background:#9bb0d3; animation:tp .9s infinite }
.typing i:nth-child(2){ animation-delay:.15s } .typing i:nth-child(3){ animation-delay:.3s }
@keyframes tp { 0%,100%{opacity:.6; transform:translateY(0)} 50%{opacity:1; transform:translateY(-3px)} }
@keyframes popIn { 0%{opacity:0; transform:scale(.9) translateY(6px)} 100%{opacity:1; transform:scale(1) translateY(0)} }

/* --------- Card 3: NO-IP ---------- */
.pc{
  position:absolute; inset:10px; border-radius:14px; background:#0a112d; border:1px solid rgba(255,255,255,.08); padding:10px;
  overflow:auto; color:#cfe0ff; font:13px ui-monospace, Consolas, Menlo, monospace; z-index:2;
  width: calc(100% - 20px); /* garante fluidez no mobile */
}
.cursor{ position:absolute; width:10px; height:18px; background:#eaf2ff; animation:blink 1s infinite; z-index:3; }
@keyframes blink{ 0%,49%{opacity:1} 50%,100%{opacity:0} }
.matrix{
  position:absolute; inset:0; color:#00ffc3; font:14px ui-monospace,Consolas,monospace; opacity:.14; pointer-events:none;
}
.host{ display:grid; grid-template-columns:1fr auto; align-items:center; gap:8px; padding:4px 6px; border-radius:8px; margin:4px 0; background:#0f1944; border:1px solid rgba(255,255,255,.08); }
.host b{ color:#fff }
.host .st{ font-weight:900; padding:4px 8px; border-radius:999px; }
.st.ok{ background:rgba(25,195,125,.18); color:var(--ok); border:1px solid rgba(25,195,125,.35) }
.st.bad{ background:rgba(255,99,99,.18); color:var(--bad); border:1px solid rgba(255,99,99,.35) }

/* --------- Card 4: SCANNER WEB ---------- */
.steps{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px; }
.step{ padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.12); font-weight:900; background:#141c45; }
.step.on{ background:linear-gradient(90deg,var(--brand),var(--accent)); color:#0a1020; border-color:transparent; box-shadow:0 10px 24px rgba(32,211,255,.28); }
.gauge{ position:absolute; right:12px; top:12px; width:70px; height:70px; border-radius:50%; background:conic-gradient(var(--accent) 0deg, rgba(255,255,255,.18) 0deg); display:grid; place-items:center; font-weight:900; border:1px solid rgba(255,255,255,.08); z-index:2; }
.table{ width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; background:var(--card); border:1px solid var(--border); border-radius:12px; }
.table th,.table td{ padding:10px 12px; border-bottom:1px solid var(--border); } .table tr:last-child td{ border-bottom:0 }

/* --------- Card 5: AV ---------- */
.av-sum{ display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-bottom:8px }
.av-kpi{ background:#0f1944; border:1px solid rgba(255,255,255,.08); border-radius:10px; padding:8px; text-align:center }
.av-kpi b{ font-size:1.2rem }
.av-list{ display:grid; gap:6px; grid-template-columns:1fr; }
.av-row{ display:grid; grid-template-columns:1fr auto auto auto; gap:8px; align-items:center; background:#0f1944; border:1px solid rgba(255,255,255,.08); border-radius:10px; padding:6px 8px; }
.av-row .light{ width:10px; height:10px; border-radius:50%; background:#555; box-shadow:none }
.av-row.good .light{ background:#19c37d; box-shadow:0 0 12px rgba(25,195,125,.7) }
.av-row.warn .light{ background:#ffd166; box-shadow:0 0 12px rgba(255,209,102,.7) }
.av-row.bad .light{ background:#ff6363; box-shadow:0 0 12px rgba(255,99,99,.7) }
.av-row .pill{ font-weight:900; padding:4px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.12); }
.pill.n{ background:rgba(43,142,255,.16); color:#2b8eff }
.pill.k{ background:rgba(124,77,255,.16); color:#7c4dff }
.wave{
  position:relative; height:8px; border-radius:6px; overflow:hidden; background:rgba(255,255,255,.08);
}
.wave::before{
  content:""; position:absolute; inset:0; background:linear-gradient(90deg, transparent, rgba(32,211,255,.4), transparent 60%);
  transform:translateX(-100%); animation:bar 2s linear infinite;
}
@keyframes bar{ to{ transform:translateX(100%) } }

/* --------- Card 6: SERVIDOR ---------- */
.spark{ position:absolute; right:10px; bottom:10px; display:flex; gap:8px; z-index:2; flex-wrap:wrap }
.spark canvas{ background:#0e1540; border:1px solid rgba(255,255,255,.08); border-radius:6px }

/* --------- Card 7: TASKOPS BOT (T.I.) ---------- */
.queue{ display:grid; gap:8px; }
.job{
  display:grid; grid-template-columns:28px 1fr auto; gap:8px; align-items:center; padding:8px; border:1px solid rgba(255,255,255,.1); border-radius:10px; background:#0f1841;
}
.job .eye{ width:18px; height:18px; border-radius:50%; background:#19c37d; box-shadow:0 0 10px rgba(25,195,125,.8); position:relative; overflow:hidden }
.job .eye::after{ content:""; position:absolute; width:6px; height:6px; border-radius:50%; background:#0a1020; left:6px; top:6px; animation:blinkEye 3s infinite }
@keyframes blinkEye{ 0%,92%,100%{ transform:scaleY(1) } 95%{ transform:scaleY(.1) } }
.job .p{ width:140px; height:8px; border-radius:6px; overflow:hidden; background:rgba(255,255,255,.08); }
.job .p .bar{ height:100%; width:0%; background:linear-gradient(90deg,#7c4dff,#20d3ff); }
.job.ok{ border-color:rgba(25,195,125,.3) } .job.err{ border-color:rgba(255,99,99,.3) }

/* --------- Card 8: NETWORK / FIREWALL ---------- */
.net{ position:absolute; inset:10px; z-index:2; }
.net svg{ width:100%; height:100% }
.node{ fill:url(#nodeg); }
.link{ stroke:rgba(255,255,255,.25); stroke-width:2; marker-end:url(#arr); }
.pulseNode{ animation:pn 1.5s ease-in-out infinite }
@keyframes pn{ 0%,100%{ filter:drop-shadow(0 0 0 rgba(32,211,255,0)) } 50%{ filter:drop-shadow(0 0 12px rgba(32,211,255,.8)) } }
.rulebox{ margin-top:8px; display:flex; gap:8px; flex-wrap:wrap }
.rule{ padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.12); background:#141c45; font-weight:900; cursor:pointer; touch-action:manipulation; }
.rule.on{ background:linear-gradient(90deg,var(--brand),var(--accent)); color:#0a1020; border-color:transparent; box-shadow:0 10px 24px rgba(32,211,255,.28); }

/* --------- Card 9: SIEM / RADAR ---------- */
.radar{ position:absolute; inset:10px; z-index:2; display:grid; grid-template-columns:1.2fr .8fr; gap:10px; }
.pane{ border:1px solid rgba(255,255,255,.08); border-radius:12px; background:#0f1944; padding:10px; }
#radarCanvas{ width:100%; height:auto; display:block; background:radial-gradient(circle at 50% 50%, rgba(32,211,255,.06), transparent 60%); border-radius:10px; }
.alerts{ height:100%; overflow:auto; }
.alerts .row{ display:grid; grid-template-columns:auto 1fr auto; gap:8px; align-items:center; padding:6px 8px; border-bottom:1px solid rgba(255,255,255,.06); }
.alerts .sev{ width:10px; height:10px; border-radius:50% }
.alerts .sev.h{ background:#ff6363 } .alerts .sev.m{ background:#ffd166 } .alerts .sev.l{ background:#19c37d }

/* --------- NOVOS: 10~14 ---------- */
.kpis{ display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-bottom:8px }
.kpi{ background:#0f1944; border:1px solid rgba(255,255,255,.08); border-radius:10px; padding:8px; text-align:center }
.kpi b{ font-size:1.2rem }
.table{ width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; background:var(--card); border:1px solid var(--border); border-radius:12px; }
.table th,.table td{ padding:10px 12px; border-bottom:1px solid var(--border); } .table tr:last-child td{ border-bottom:0 }
.badge-mini{ padding:3px 6px; border-radius:999px; border:1px solid rgba(255,255,255,.12); font-size:.72rem }

.heat{ position:absolute; inset:12px; display:grid; grid-template-columns:repeat(14,1fr); gap:3px; z-index:2 }
.heat i{ display:block; padding-top:100%; border-radius:4px; background:#152055; box-shadow:inset 0 0 0 1px rgba(255,255,255,.06) }

.timeline{ position:absolute; inset:12px; display:grid; grid-template-rows:auto 1fr; gap:6px; z-index:2 }
.ticks{ display:grid; grid-template-columns:repeat(12,1fr); gap:4px }
.ticks i{ height:6px; border-radius:6px; background:rgba(255,255,255,.1) }
.track{ position:relative; border:1px solid rgba(255,255,255,.08); border-radius:10px; background:#0f1944 }
.dot{ position:absolute; width:12px; height:12px; border-radius:50%; background:linear-gradient(90deg,#7c4dff,#20d3ff); box-shadow:0 0 12px rgba(32,211,255,.7) }

.tree{ position:absolute; inset:10px; display:grid; grid-template-columns:1fr 1fr; gap:10px; z-index:2 }
.col{ border:1px solid rgba(255,255,255,.08); border-radius:10px; background:#0f1944; padding:8px; overflow:auto; min-height:120px }
.item{ display:flex; justify-content:space-between; gap:8px; padding:6px; border-radius:8px; margin:4px 0; background:#121c49; border:1px solid rgba(255,255,255,.08) }
.item .p{ width:120px; height:8px; background:rgba(255,255,255,.08); border-radius:6px; overflow:hidden }
.item .p .bar{ height:100%; width:0%; background:linear-gradient(90deg,#20d3ff,#7c4dff) }

.phish{ position:absolute; inset:10px; border:1px solid rgba(255,255,255,.08); border-radius:10px; background:#0f1944; padding:8px; z-index:2; overflow:auto }
.mailrow{ display:grid; grid-template-columns:auto 1fr auto; gap:8px; align-items:center; padding:6px; border-bottom:1px solid rgba(255,255,255,.06) }
.mailrow b{ color:#fff }
.flag{ padding:4px 8px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); font-weight:900 }

.diff{ position:absolute; inset:10px; display:grid; grid-template-columns:1fr 1fr; gap:10px; z-index:2 }
.cfg{ border:1px solid rgba(255,255,255,.08); border-radius:10px; background:#0f1944; padding:8px; font:13px ui-monospace,Consolas,monospace; white-space:pre-wrap; }
.add{ background:rgba(25,195,125,.14) } .del{ background:rgba(255,99,99,.14) } .chg{ background:rgba(255,209,102,.14) }

/* Efeito de lanterna */
.sweep{ position:absolute; inset:0; pointer-events:none; background: radial-gradient(160px 160px at var(--x,50%) var(--y,50%), rgba(32,211,255,.10), transparent 60%); mix-blend-mode:screen; z-index:1 }

/* ======================================================================
   RESPONSIVIDADE EXTRA
   ====================================================================== */
canvas{ max-width:100%; height:auto; } /* garante que todos os gráficos fiquem fluidos */
svg{ max-width:100%; height:auto; }
button{ touch-action:manipulation; }

@media (max-width:880px){
  .radar{ grid-template-columns:1fr; }
}

@media (max-width:700px){
  .container{ padding:0 12px; }
  .stage{ height:240px; }
  .cams{ grid-template-columns:repeat(2,1fr); }
  .spark{ right:6px; bottom:6px; gap:6px }
  .job .p{ width:100px }
  .tree{ grid-template-columns:1fr; }
  .diff{ grid-template-columns:1fr; }
  .kpis{ grid-template-columns:1fr; }
  .av-sum{ grid-template-columns:1fr; }
}

/* Reduzir movimento quando necessário */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition:none !important; }
}
</style>
</head>
<body>

<header>
  <div class="container nav">
    <div class="logo">Quartos de Segurança • Carlos Henrique</div>
    <span class="badge-h">UI/UX animado • Inicia/pausa por visibilidade</span>
  </div>
  <div id="scrollbar"></div>
</header>

<section class="container section">
  <div class="hero-line"></div>
  <h1>Experimentos avançados para empresa com segurança segurança</h1>
  <p class="muted">Sem imagens externas. Tudo animado (CSS/SVG/Canvas). As rotinas só rodam quando o card está na tela.</p>
</section>

<section class="container section" id="suite">
  <div class="grid">

    <!-- =========================================================
         CARD 1 — Monitor de CÂMERAS (6 cams + queda aleatória)
         ========================================================= -->
    <article class="card" data-anim="cams">
      <div class="head"><h3>#1 • Câmeras paradas (detecção + HUD)</h3><span class="badge">CFTV</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="stars"></div><div class="stars2"></div><div class="stars3"></div>
        <div class="cams" id="cams"></div>
        <div class="kit"><span class="tag">6 câmeras</span><span class="tag">HUD (fps/bitrate)</span><span class="tag pulse">scan 1s</span></div>
      </div>
      <div class="body">
        <p class="small muted">Robô monitora 6 câmeras. Quando uma desconecta, registra instantaneamente e tenta recuperar.</p>
        <div id="cams-log" class="term" aria-live="polite"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 2 — Cobrança (WhatsApp ⇆ Gmail) 
         ========================================================= -->
    <article class="card" data-anim="billing">
      <div class="head"><h3>#2 • Bot de cobrança (WhatsApp ⇆ Email)</h3><span class="badge">Mensageria</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="stars"></div><div class="stars2"></div><div class="stars3"></div>
        <div class="device">
          <div class="bar">
            <div class="ind"><i class="light"></i><b>Assistente</b></div>
            <div>
              <button class="mode on" data-chan="wa">WhatsApp</button>
              <button class="mode" data-chan="mail">Gmail</button>
            </div>
          </div>
          <div id="chat" class="chat"></div>
        </div>
        <div class="kit"><span class="tag">typing</span><span class="tag">ticks</span><span class="tag pulse">entrega/leitura</span></div>
      </div>
      <div class="body">
        <div id="bill-log" class="term"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 3 — No-IP (login digitado + hosts)
         ========================================================= -->
    <article class="card" data-anim="noip">
      <div class="head"><h3>#3 • Auditor de DNS (No-IP)</h3><span class="badge">Rede</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="matrix" aria-hidden="true"></div>
        <div id="pc" class="pc"></div>
        <div id="cur" class="cursor" style="left:22px; top:30px"></div>
        <div class="kit"><span class="tag">autologin</span><span class="tag">check hosts</span><span class="tag pulse">✓ / ✗</span></div>
      </div>
      <div class="body">
        <div id="noip-log" class="term"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 4 — Scanner Web
         ========================================================= -->
    <article class="card" data-anim="scanner">
      <div class="head"><h3>#4 • Scanner Web (TLS/Headers/Ports/SQLi/XSS)</h3><span class="badge">AppSec</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="stars"></div><div class="stars2"></div>
        <div id="gauge" class="gauge">0%</div>
        <div class="kit"><span class="tag">pipeline</span><span class="tag">severidade</span><span class="tag pulse">relatório</span></div>
      </div>
      <div class="body">
        <div id="steps" class="steps"></div>
        <div id="scan-log" class="term"></div>
        <table class="table" style="margin-top:10px">
          <thead><tr><th>Checagem</th><th>Detalhe</th><th>Sev.</th></tr></thead>
          <tbody id="scan-table"></tbody>
        </table>
      </div>
    </article>

    <!-- =========================================================
         CARD 5 — Endpoint (Norton/Kaspersky)
         ========================================================= -->
    <article class="card" data-anim="av">
      <div class="head"><h3>#5 • Saúde de dispositivos (Norton + Kaspersky)</h3><span class="badge">Endpoint</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="stars"></div><div class="stars2"></div>
        <div class="kit"><span class="tag">sync</span><span class="tag">telemetria</span><span class="tag pulse">status</span></div>
      </div>
      <div class="body">
        <div id="av-list" class="av-list"></div>
        <div id="av-log" class="term" style="margin-top:8px"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 6 — Relatórios de Servidor
         ========================================================= -->
    <article class="card" data-anim="server">
      <div class="head"><h3>#6 • Relatórios do servidor</h3><span class="badge">Ops</span></div>
      <div class="stage" style="height:220px">
        <div class="sweep"></div>
        <div class="stars"></div>
        <div class="spark">
          <canvas id="cpu" width="180" height="90"></canvas>
          <canvas id="mem" width="180" height="90"></canvas>
          <canvas id="net" width="180" height="90"></canvas>
        </div>
        <div class="kit"><span class="tag">CPU</span><span class="tag">RAM</span><span class="tag">NET</span></div>
      </div>
      <div class="body"><div id="sv-log" class="term"></div></div>
    </article>

    <!-- =========================================================
         CARD 7 — TaskOps Bot (T.I.) — Agenda & Execução
         ========================================================= -->
    <article class="card" data-anim="tasks">
      <div class="head"><h3>#7 • TaskOps Bot (rotinas de T.I.)</h3><span class="badge">Automação</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="stars"></div><div class="stars2"></div>
        <div class="kit"><span class="tag">cron fake</span><span class="tag">fila</span><span class="tag pulse">execução</span></div>
      </div>
      <div class="body">
        <div id="q" class="queue"></div>
        <div id="q-log" class="term" style="margin-top:8px"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 8 — Network Map + Firewall Regras
         ========================================================= -->
    <article class="card" data-anim="net">
      <div class="head"><h3>#8 • Visualizador de Rede + Firewall</h3><span class="badge">NOC</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="net" id="net"></div>
        <div class="kit"><span class="tag">pacotes →</span><span class="tag">pulsos</span><span class="tag pulse">regras</span></div>
      </div>
      <div class="body">
        <div class="rulebox" id="rules"></div>
        <div id="net-log" class="term" style="margin-top:8px"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 9 — SIEM Radar (anomalias)
         ========================================================= -->
    <article class="card" data-anim="siem">
      <div class="head"><h3>#9 • Radar de Anomalias (SIEM)</h3><span class="badge">SOC</span></div>
      <div class="stage" style="height:260px">
        <div class="sweep"></div>
        <div class="radar">
          <div class="pane"><canvas id="radarCanvas" width="520" height="220"></canvas></div>
          <div class="pane alerts"><div id="a-list"></div></div>
        </div>
        <div class="kit"><span class="tag">EPS</span><span class="tag">top alerts</span><span class="tag pulse">pulsos</span></div>
      </div>
      <div class="body"><div id="siem-log" class="term"></div></div>
    </article>

    <!-- =========================================================
         CARD 10 — Heatmap de Patches e Ativos
         ========================================================= -->
    <article class="card" data-anim="heatmap">
      <div class="head"><h3>#10 • Patches & Inventário (heatmap)</h3><span class="badge">Governança</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="heat" id="heat"></div>
        <div class="kit"><span class="tag">inventário</span><span class="tag">patch</span><span class="tag pulse">prioridade</span></div>
      </div>
      <div class="body">
        <p class="small muted">Visualização em grade de ativos mostrando status de atualização, criticidade e tendência de exposição. Facilita priorização orientada por risco, destaca gargalos operacionais e aponta quais servidores merecem janela de manutenção urgente baseado em idade do patch, nível CVSS, dependências e impacto potencial.</p>
        <div id="heat-log" class="term"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 11 — Linha do Tempo de Incidentes
         ========================================================= -->
    <article class="card" data-anim="timeline">
      <div class="head"><h3>#11 • Linha do tempo IR (play)</h3><span class="badge">Resposta</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="timeline">
          <div class="ticks" id="ticks"></div>
          <div class="track" id="track"><i class="dot" id="dot" style="left:0; top:14px"></i></div>
        </div>
        <div class="kit"><span class="tag">deteção</span><span class="tag">contenção</span><span class="tag">erradicação</span></div>
      </div>
      <div class="body">
        <p class="small muted">Reproduz eventos de resposta a incidentes no tempo, exibindo progressão entre fases, mudanças de severidade e marcos executivos. Ajuda comunicação clara, acelera retrospectivas, evidencia latências, mostra decisões críticas e constrói narrativa para auditorias, treinamentos e simulações periódicas com métricas acionáveis.</p>
        <div id="tl-log" class="term"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 12 — Verificador de Backups
         ========================================================= -->
    <article class="card" data-anim="backup">
      <div class="head"><h3>#12 • Verificador de backups</h3><span class="badge">Resiliência</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="tree">
          <div class="col" id="bk-src"></div>
          <div class="col" id="bk-dst"></div>
        </div>
        <div class="kit"><span class="tag">checksum</span><span class="tag">restauração</span><span class="tag pulse">amostragem</span></div>
      </div>
      <div class="body">
        <p class="small muted">Simula verificação de integridade realizando amostragem de arquivos, comparando checksums e testando restauração. Evidencia divergências, mede taxa de sucesso, gera confiança operacional e reduz surpresa durante crises. Aponta volumes problemáticos, histórico de falhas e efetividade das janelas de backup.</p>
        <div id="bk-log" class="term"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 13 — Analisador de Phishing
         ========================================================= -->
    <article class="card" data-anim="phish">
      <div class="head"><h3>#13 • Analisador de phishing</h3><span class="badge">EmailSec</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="phish" id="phish"></div>
        <div class="kit"><span class="tag">SPF/DKIM</span><span class="tag">IOC</span><span class="tag pulse">score</span></div>
      </div>
      <div class="body">
        <p class="small muted">Processa mensagens simuladas destacando indicadores maliciosos, reputação de domínios, encurtadores, anexos suspeitos e linguagem persuasiva. Classifica risco, marca falsificação, sugere bloqueios, educa usuários com exemplos visuais e contribui para playbooks SOC reduzindo tempo de triagem repetitiva.</p>
        <div id="ph-log" class="term"></div>
      </div>
    </article>

    <!-- =========================================================
         CARD 14 — Detector de Drift de Configuração
         ========================================================= -->
    <article class="card" data-anim="drift">
      <div class="head"><h3>#14 • Drift de configuração</h3><span class="badge">Compliance</span></div>
      <div class="stage">
        <div class="sweep"></div>
        <div class="diff">
          <div class="cfg" id="cfg-base"></div>
          <div class="cfg" id="cfg-live"></div>
        </div>
        <div class="kit"><span class="tag">baseline</span><span class="tag">desvio</span><span class="tag pulse">aprovação</span></div>
      </div>
      <div class="body">
        <p class="small muted">Compara baseline aprovada contra configuração viva destacando adições, remoções e alterações críticas. Facilita auditoria, previne exceções não autorizadas, acelera RCA e garante consistência entre ambientes. Alinha mudanças com políticas, evita regressões e reforça governança técnica sustentável.</p>
        <div id="df-log" class="term"></div>
      </div>
    </article>

  </div>
</section>

<div class="utils">
  <button id="pauseAll">⏸ Pausar</button>
  <button id="playAll">▶️ Retomar</button>
</div>

<footer class="container footer">&copy; 2025 Carlos Henrique — todos os direitos reservados.</footer>

<!-- ======================================================================
     JAVASCRIPT
     ====================================================================== -->
<script>
/* ---------------------------------------------------------------
   Utilitários
   --------------------------------------------------------------- */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
const now = () => new Date().toTimeString().slice(0,8);
const log = (el, msg, cls='')=>{
  if(!el) return;
  el.insertAdjacentHTML('beforeend', `<div>[${now()}] ${cls?`<span class="${cls}">`:''}${msg}${cls?'</span>':''}</div>`);
  el.scrollTop = el.scrollHeight;
};
const randint = (a,b)=> Math.floor(Math.random()*(b-a+1))+a;
const choice = arr => arr[Math.floor(Math.random()*arr.length)];

/* Barra de leitura + revelar seções */
(()=>{ const bar=$('#scrollbar');
  const onScroll=()=>{ const h=document.documentElement; const max=h.scrollHeight-h.clientHeight; const p=max>0?(h.scrollTop/max)*100:0; if(bar) bar.style.width=p+'%'; };
  addEventListener('scroll', onScroll, {passive:true}); onScroll();
  const io=new IntersectionObserver(es=>es.forEach(e=>e.isIntersecting&&e.target.classList.add('show')),{threshold:.18});
  $$('.section').forEach(s=>io.observe(s));
})();

/* Efeito lanterna nos palcos */
$$('.stage').forEach(st=>{
  const sweep = document.createElement('div'); sweep.className='sweep'; st.prepend(sweep);
  const set = (x,y)=>{ st.style.setProperty('--x', x+'px'); st.style.setProperty('--y', y+'px'); };
  st.addEventListener('pointermove', e=>{
    const r=st.getBoundingClientRect(); set(e.clientX - r.left, e.clientY - r.top);
  });
  st.addEventListener('pointerleave', ()=> set(st.clientWidth*0.5, st.clientHeight*0.5));
  set(st.clientWidth*0.5, st.clientHeight*0.5);
});

/* Engine: inicia/pausa por visibilidade */
function watchCard(card, builder){
  let ctrl=null;
  const io=new IntersectionObserver(es=>{
    const e=es[0];
    if(e.isIntersecting){ if(!ctrl) ctrl=builder(card); ctrl.start?.(); }
    else{ ctrl?.stop?.(); }
  },{threshold:.35});
  io.observe(card);
  return ()=> ctrl;
}

/* Pausar/retomar global */
const controllers=[];
$('#pauseAll').addEventListener('click', ()=> controllers.forEach(c=>c()?.stop?.()));
$('#playAll').addEventListener('click',  ()=> controllers.forEach(c=>c()?.start?.()));

/* ---------------------------------------------------------------
   1) CÂMERAS
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="cams"]'), (card)=>{
  const grid=card.querySelector('#cams'); const term=card.querySelector('#cams-log');
  const N=6;
  const names=['Residencial Vale Verde','Comercial Alpha','Fábrica Orion','Condomínio Azul','Loja Centro','Escritório Oeste'];
  const cams=[];
  grid.innerHTML='';
  for(let i=0;i<N;i++){
    const el=document.createElement('div'); el.className='cam';
    el.innerHTML=`
      <div class="hdr"><span class="slot">Cam ${i+1} · ${names[i].split(' ')[0]}</span><i class="dot"></i></div>
      <div class="fx"><div class="scan"></div><div class="crt"></div><div class="snow"></div></div>
      <div class="hud">
        <span class="pill fps">FPS 30</span>
        <span class="pill br">Bitrate 2.4Mb</span>
        <span class="pill res">1080p</span>
        <span class="signal"><i></i><i></i><i></i><i></i><i></i></span>
      </div>
      <div class="nosignal">SEM SINAL</div>`;
    grid.appendChild(el);
    cams.push({el,on:true,fps:randint(24,30),br:(Math.random()*3+1.5).toFixed(1)});
  }
  let y=-3, tm=null;
  function tick(){
    // scanline
    y+=3; if(y>250) y=-3; grid.querySelectorAll('.scan').forEach(s=> s.style.top=y+'px');
    // jitter HUD
    cams.forEach(c=>{
      const bars=[...c.el.querySelectorAll('.signal i')];
      const level=randint(1,5); bars.forEach((b,i)=> b.classList.toggle('on', i<level));
      if(!c.on) return;
      c.fps=Math.max(23, Math.min(31, c.fps+(Math.random()>.5?1:-1)));
      c.br=Math.max(1.2, Math.min(5, Number(c.br)+(Math.random()>.5?0.1:-0.1))).toFixed(1);
      c.el.querySelector('.fps').textContent='FPS '+c.fps;
      c.el.querySelector('.br').textContent='Bitrate '+c.br+'Mb';
    });
    // queda aleatória
    if(Math.random()<.22){
      const onIdx=cams.map((c,i)=>c.on?i:-1).filter(i=>i>=0);
      if(onIdx.length){
        const ix=choice(onIdx); const c=cams[ix]; c.on=false; c.el.classList.add('off');
        log(term, `Blackout • ${names[ix]} • Câmera ${ix+1}`, 'bad');
      }
    }
    // retorno aleatório
    if(Math.random()<.18){
      const offIdx=cams.map((c,i)=>!c.on?i:-1).filter(i=>i>=0);
      if(offIdx.length){
        const ix=choice(offIdx); const c=cams[ix]; c.on=true; c.el.classList.remove('off');
        log(term, `Restabelecida • ${names[ix]} • Câmera ${ix+1}`, 'ok');
      }
    }
  }
  return {
    start(){ if(tm) return; term.innerHTML=''; log(term,'Monitor iniciado • 6 câmeras ativas','ok'); tm=setInterval(tick,1000); },
    stop(){ clearInterval(tm); tm=null; }
  };
}));

/* ---------------------------------------------------------------
   2) COBRANÇA — WhatsApp & Gmail
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="billing"]'), (card)=>{
  const chat=card.querySelector('#chat'); const logbox=card.querySelector('#bill-log');
  const modes=card.querySelectorAll('.mode'); let chan='wa';
  modes.forEach(b=> b.addEventListener('click',()=>{ modes.forEach(x=>x.classList.remove('on')); b.classList.add('on'); chan=b.dataset.chan; chat.innerHTML=''; }));
  const flow=[
    {ch:'wa',who:'bot',txt:'Olá, Carlos! 👋 Sou o assistente automático.', meta:'entregue ✓'},
    {ch:'wa',who:'bot',txt:'Sua fatura #1471 vence em 13/08/2025. Valor: R$ 328,58.', meta:'digitando…'},
    {ch:'wa',who:'bot',txt:'Se preferir, Pix com QR logo abaixo do botão Pagar.', meta:'visto ✓✓'},
    {ch:'wa',who:'user',txt:'Vou pagar às 15h. 👍', meta:'enviado'},
    {ch:'mail',who:'bot',txt:'[Email] Boleto e QR Pix enviados.', meta:'SMTP 250 2.0.0'},
    {ch:'mail',who:'user',txt:'[Email] Recebido. Obrigado!', meta:'IMAP ok'},
    {ch:'wa',who:'bot',txt:'Comprovante será enviado após a confirmação.', meta:'visto ✓✓'},
    {ch:'mail',who:'bot',txt:'[Email] Pagamento confirmado ✅. Comprovante anexado.', meta:'SPF/DKIM pass'}
  ];
  let i=0, tm=null;
  function typing(){ const b=document.createElement('div'); b.className='bbl bot'; b.innerHTML='<span class="typing"><i></i><i></i><i></i></span>'; chat.appendChild(b); chat.scrollTop=chat.scrollHeight; return b; }
  function bubble(who,text,meta,mail){ const b=document.createElement('div'); b.className=`bbl ${who==='bot'?'bot':'user'} ${mail?'mail':''}`; b.style.animation='popIn .22s ease both'; b.innerHTML=`${text}<div class="meta">${meta||''}</div>`; chat.appendChild(b); chat.scrollTop=chat.scrollHeight; }
  function step(){ const s=flow[i++%flow.length]; if(s.ch!==chan) return; const g=typing(); setTimeout(()=>{ g.remove(); bubble(s.who,s.txt,s.meta, s.ch==='mail'); log(logbox,(s.ch==='mail'?'GMAIL':'WHATS')+' • '+s.txt, s.who==='bot'?'ok':''); }, 420); }
  return { start(){ if(tm) return; chat.innerHTML=''; logbox.innerHTML=''; i=0; tm=setInterval(step, 950); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   3) NO-IP — PC digitando
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="noip"]'), (card)=>{
  const pc=card.querySelector('#pc'); const cur=card.querySelector('#cur'); const logbox=card.querySelector('#noip-log'); const m=card.querySelector('.matrix');
  const hosts=['alpha.ddns.net','beta.ddns.net','gamma.ddns.net','delta.ddns.net','omega.ddns.net','zeta.ddns.net'];
  let stage=0, idx=0, tm=null, rain=null;
  function move(x,y){ cur.style.left=x+'px'; cur.style.top=y+'px'; }
  function print(s){ pc.insertAdjacentHTML('beforeend', s); pc.scrollTop=pc.scrollHeight; }
  function matrixStart(){ if(rain) return; let cols=60, rows=10; let str=''; for(let r=0;r<rows;r++){ let line=''; for(let c=0;c<cols;c++){ line += Math.random()>.5?'0':'1'; } str+=line+'<br/>'; } m.innerHTML=str; rain=setInterval(()=>{ m.style.transform=`translateY(${(Date.now()/40)%20}px)`; },60); }
  function matrixStop(){ clearInterval(rain); rain=null; m.innerHTML=''; }
  function tick(){
    if(stage===0){
      pc.innerHTML='<div>Login • <span class="field">email</span>: operador@empresa.com</div>';
      move(140,52); matrixStart(); stage=1;
    }else if(stage===1){
      print('<div>Senha • <span class="field">••••••••</span></div><div>Autenticando…</div><br/>'); move(220,72);
      setTimeout(()=>{ print('<div class="ok">OK ✓</div><br/>'); stage=2; }, 280);
    }else if(stage===2){
      if(idx===0) print('<div>Verificando hosts:</div>');
      if(idx<hosts.length){
        const h=hosts[idx]; const ok=Math.random()>.22;
        print(`<div class="host"><b>${h}</b><span class="st ${ok?'ok':'bad'}">${ok?'ATIVO':'OFF'}</span></div>`);
        if(!ok){ log(logbox, `Host OFF • registrando DNS para ${h}`, 'bad'); setTimeout(()=>log(logbox, `Registro efetuado • ${h}`, 'ok'), 300); }
        else{ log(logbox, `Host OK • ${h}`, 'ok'); }
        idx++;
      }else{
        print('<br/><div class="ok">Checklist concluída ✓</div>');
        stage=0; idx=0; setTimeout(()=>{ pc.innerHTML=''; }, 1000);
      }
    }
  }
  return { start(){ if(tm) return; pc.innerHTML=''; logbox.innerHTML=''; stage=0; idx=0; matrixStart(); tm=setInterval(tick, 700); }, stop(){ clearInterval(tm); tm=null; matrixStop(); } };
}));

/* ---------------------------------------------------------------
   4) SCANNER WEB
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="scanner"]'), (card)=>{
  const steps=['DNS','TLS','Headers','Ports','SQLi','XSS','CSRF','DirListing','RateLimit'];
  const stepsBox=card.querySelector('#steps'); const logbox=card.querySelector('#scan-log'); const gauge=card.querySelector('#gauge'); const tbody=card.querySelector('#scan-table');
  stepsBox.innerHTML=steps.map(s=>`<span class="step">${s}</span>`).join('');
  const pills=stepsBox.querySelectorAll('.step'); let i=0, tm=null;
  function tr(name,det,sev){ const row=document.createElement('tr'); row.innerHTML=`<td>${name}</td><td>${det}</td><td>${sev}</td>`; tbody.prepend(row); }
  function tick(){
    pills.forEach(p=>p.classList.remove('on'));
    const p=pills[i%pills.length]; p.classList.add('on');
    const r=Math.random(); const sev=r>.8?'Alta':(r>.5?'Média':'Baixa'); const cls=r>.8?'bad':(r>.5?'warn':'');
    const prog=Math.round(((i+1)/steps.length)*100);
    gauge.style.background=`conic-gradient(var(--accent) ${prog*3.6}deg, rgba(255,255,255,.18) 0deg)`; gauge.textContent=prog+'%';
    const msg=`${p.textContent} • risco ${sev}`;
    log(logbox, msg, cls||'ok');
    if(r>.85) tr(p.textContent, 'Encontrado header inseguro / possível vetor', sev);
    i=(i+1)%steps.length; if(i===0){ log(logbox, 'Relatório finalizado', 'ok'); logbox.insertAdjacentHTML('beforeend','<br/>'); }
  }
  return { start(){ if(tm) return; logbox.innerHTML=''; tbody.innerHTML=''; i=0; tm=setInterval(tick, 880); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   5) AV — Norton/Kaspersky
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="av"]'), (card)=>{
  const list=card.querySelector('#av-list'); const logbox=card.querySelector('#av-log');
  const devices=[ 'PC-Front','NB-Analista','Srv-Apps','NB-Fiscal','Totem-Entrada','NB-Diretoria' ];
  function render(){
    list.innerHTML = devices.map(n=>`
      <div class="av-row" data-name="${n}">
        <span>${n}</span>
        <span class="pill n">Norton</span>
        <span class="pill k">Kaspersky</span>
        <i class="light"></i>
        <div class="wave"></div>
      </div>
    `).join('');
  }
  render();
  let tm=null;
  function tick(){
    const rows=list.querySelectorAll('.av-row');
    rows.forEach(r=> r.classList.remove('good','warn','bad'));
    const row=choice([...rows]);
    const dice=Math.random();
    if(dice<.14){ row.classList.add('bad'); log(logbox, `${row.dataset.name} • malware isolado`, 'bad'); }
    else if(dice<.33){ row.classList.add('warn'); log(logbox, `${row.dataset.name} • assinatura desatualizada`, 'warn'); }
    else { row.classList.add('good'); log(logbox, `${row.dataset.name} • protegido`, 'ok'); }
  }
  return { start(){ if(tm) return; logbox.innerHTML=''; tm=setInterval(tick, 900); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   6) SERVIDOR — gráficos
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="server"]'), (card)=>{
  const c1=card.querySelector('#cpu').getContext('2d');
  const c2=card.querySelector('#mem').getContext('2d');
  const c3=card.querySelector('#net').getContext('2d');
  const logbox=card.querySelector('#sv-log');
  const b1=new Array(60).fill(0), b2=new Array(60).fill(0), b3=new Array(60).fill(0);
  let tm=null, cpu=18, mem=42, inb=120, outb=80;
  const push=(b,v)=>{ b.push(v); b.shift(); };
  function draw(ctx, buf, label, col){
    const w=ctx.canvas.width, h=ctx.canvas.height;
    ctx.fillStyle='#0e1540'; ctx.fillRect(0,0,w,h);
    ctx.strokeStyle='rgba(255,255,255,.08)'; for(let x=20;x<w;x+=20){ ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,h); ctx.stroke(); }
    ctx.fillStyle='#cfe0ff'; ctx.font='12px Segoe UI, sans-serif'; ctx.fillText(label,6,14);
    ctx.beginPath();
    buf.forEach((v,i)=>{ const x=i*(w/(buf.length-1)); const y=h-12-(h-24)*(v/100); i?ctx.lineTo(x,y):ctx.moveTo(x,y); });
    ctx.strokeStyle=col; ctx.lineWidth=2; ctx.stroke();
  }
  function tick(){
    cpu=Math.max(5,Math.min(97,cpu+(Math.random()*14-7)));
    mem=Math.max(25,Math.min(94,mem+(Math.random()*10-5)));
    inb=Math.max(20,Math.min(320,inb+(Math.random()*50-25)));
    outb=Math.max(10,Math.min(230,outb+(Math.random()*40-20)));
    push(b1,cpu); push(b2,mem); push(b3,(inb+outb)/5);
    draw(c1,b1,'CPU %','#20d3ff'); draw(c2,b2,'RAM %','#7c4dff'); draw(c3,b3,'NET','#21e1b5');
    if(Math.random()<.08) log(logbox, `Pico de CPU ${cpu.toFixed(1)}%`, 'warn');
    if(Math.random()<.05) log(logbox, 'Erro de I/O recuperado', 'bad');
    if(Math.random()<.12) log(logbox, 'Ping ok • 10.0.0.5', 'ok');
  }
  return { start(){ if(tm) return; logbox.innerHTML=''; tm=setInterval(tick, 700); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   7) TASKOPS BOT — fila de rotinas
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="tasks"]'), (card)=>{
  const q=card.querySelector('#q'); const logbox=card.querySelector('#q-log');
  const templates=[
    {name:'Backup incremental', secs:5, cmd:'rsync -a /srv/data /backup/'},
    {name:'Reinício do serviço', secs:4, cmd:'systemctl restart api.service'},
    {name:'Deploy estático', secs:6, cmd:'npm run build && rsync dist/ web@host:/var/www'},
    {name:'Limpeza de cache', secs:3, cmd:'rm -rf /var/cache/app/*'},
    {name:'Teste de latência', secs:4, cmd:'ping -c 4 8.8.8.8'}
  ];
  let tm=null, jobs=[];
  function addJob(t){
    const id=Math.random().toString(36).slice(2,7);
    const el=document.createElement('div'); el.className='job'; el.innerHTML=`
      <div style="position:relative;width:28px;height:28px"><i class="eye" style="position:absolute;left:5px;top:5px"></i></div>
      <div><b>${t.name}</b><div class="small muted">${t.cmd}</div></div>
      <div class="p"><div class="bar"></div></div>`;
    q.appendChild(el);
    const job={id,el,bar:el.querySelector('.bar'),t,prog:0,sec:t.secs};
    jobs.push(job);
    log(logbox, `Agendado • ${t.name}`, 'ok');
  }
  function tick(){
    if(Math.random()<.35) addJob(choice(templates));
    jobs.forEach(j=>{
      if(j.prog>=100) return;
      j.prog += 100/(j.t.secs* (1000/700)); // 1 tick ~700ms
      j.bar.style.width=Math.min(100,j.prog)+'%';
      if(j.prog>=100){
        const ok=Math.random()>.12; j.el.classList.add(ok?'ok':'err');
        log(logbox, `${ok?'OK':'ERRO'} • ${j.t.name}`, ok?'ok':'bad');
      }
    });
    if(jobs.length>10){ q.removeChild(jobs[0].el); jobs.shift(); }
  }
  return { start(){ if(tm) return; q.innerHTML=''; logbox.innerHTML=''; jobs=[]; tm=setInterval(tick,700); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   8) NETWORK / FIREWALL
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="net"]'), (card)=>{
  const wrap=card.querySelector('#net'); const logbox=card.querySelector('#net-log'); const rulesBox=card.querySelector('#rules');
  wrap.innerHTML=`
    <svg viewBox="0 0 600 240">
      <defs>
        <linearGradient id="nodeg" x1="0" x2="1" y1="0" y2="0"><stop offset="0%" stop-color="#7c4dff"/><stop offset="100%" stop-color="#20d3ff"/></linearGradient>
        <marker id="arr" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto"><path d="M0,0 L6,3 L0,6 Z" fill="rgba(255,255,255,.6)"/></marker>
      </defs>
      <g id="links"></g>
      <g id="nodes"></g>
    </svg>`;
  const nodes=[
    {id:'GW', x:70, y:120}, {id:'WEB', x:220, y:60}, {id:'API', x:220, y:180},
    {id:'DB', x:380, y:120}, {id:'LOG', x:520, y:60}, {id:'CACHE', x:520, y:180}
  ];
  const edges=[ ['GW','WEB'],['GW','API'],['WEB','DB'],['API','DB'],['DB','LOG'],['API','CACHE'] ];
  const ns=wrap.querySelector('#nodes'), ls=wrap.querySelector('#links');
  ns.innerHTML = nodes.map(n=> `<g class="pulseNode"><circle class="node" cx="${n.x}" cy="${n.y}" r="18"/><text x="${n.x}" y="${n.y+38}" fill="#cfe0ff" font-size="12" font-weight="700" text-anchor="middle">${n.id}</text></g>`).join('');
  ls.innerHTML = edges.map(e=>{ const a=nodes.find(n=>n.id===e[0]), b=nodes.find(n=>n.id===e[1]); return `<line class="link" x1="${a.x}" y1="${a.y}" x2="${b.x}" y2="${b.y}"/>`; }).join('');
  const RULES=['Bloquear :/admin','Permitir :443','RateLimit /login','WAF SQLi','WAF XSS'];
  rulesBox.innerHTML = RULES.map((r,i)=> `<button class="rule${i===1?' on':''}" data-i="${i}">${r}</button>`).join('');
  rulesBox.querySelectorAll('.rule').forEach(b=> b.addEventListener('click',()=>b.classList.toggle('on')));

  let tm=null;
  function tick(){
    const e=choice(edges); const allowed= rulesBox.querySelector('.rule.on') ? Math.random()>.18 : Math.random()>.5;
    log(logbox, `Pkt ${e[0]} → ${e[1]} • ${allowed?'permitido':'bloqueado'}`, allowed?'ok':'bad');
    const setGlow=id=>{
      const idx=nodes.findIndex(n=>n.id===id);
      const g=ns.children[idx];
      g.style.filter='drop-shadow(0 0 14px rgba(32,211,255,.9))';
      setTimeout(()=> g.style.filter='', 260);
    };
    setGlow(e[0]); setGlow(e[1]);
  }
  return { start(){ if(tm) return; logbox.innerHTML=''; tm=setInterval(tick, 750); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   9) SIEM / RADAR
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="siem"]'), (card)=>{
  const cv=card.querySelector('#radarCanvas'); const ctx=cv.getContext('2d'); const alerts=card.querySelector('#a-list'); const logbox=card.querySelector('#siem-log');
  const W=cv.width, H=cv.height; let tm=null;
  const pts=[]; for(let i=0;i<40;i++) pts.push({a:Math.random()*Math.PI*2, r:Math.random()*90+20, v:(Math.random()*.02+.01), sev:Math.random()});
  function pulse(x,y,s,alpha){ ctx.beginPath(); ctx.arc(x,y,s,0,Math.PI*2); ctx.strokeStyle=`rgba(32,211,255,${alpha})`; ctx.lineWidth=2; ctx.stroke(); }
  function draw(){
    ctx.clearRect(0,0,W,H);
    ctx.strokeStyle='rgba(255,255,255,.12)'; ctx.lineWidth=1;
    for(let r=30;r<100;r+=20){ ctx.beginPath(); ctx.arc(W/2,H/2,r,0,Math.PI*2); ctx.stroke(); }
    ctx.beginPath(); ctx.moveTo(W/2,0); ctx.lineTo(W/2,H); ctx.moveTo(0,H/2); ctx.lineTo(W,H/2); ctx.stroke();
    pts.forEach(p=>{
      p.a += p.v;
      const x=W/2 + Math.cos(p.a)*p.r;
      const y=H/2 + Math.sin(p.a)*p.r;
      const sev=p.sev>0.8?'h':(p.sev>0.5?'m':'l');
      ctx.fillStyle= sev==='h'?'#ff6363' : (sev==='m'?'#ffd166' : '#19c37d');
      ctx.beginPath(); ctx.arc(x,y,3,0,Math.PI*2); ctx.fill();
      if(Math.random()<.04){ pulse(x,y,12,.4); pulse(x,y,20,.25); pulse(x,y,30,.12);
        const line=`${sev==='h'?'ALTA':sev==='m'?'MÉDIA':'BAIXA'} • ${['SQLi','XSS','Auth','Bruteforce','PortScan'][randint(0,4)]} @ ${(x|0)},${(y|0)}`;
        const row=document.createElement('div'); row.className='row'; row.innerHTML=`<i class="sev ${sev}"></i><div>${line}</div><small>${now()}</small>`;
        alerts.prepend(row); while(alerts.children.length>10) alerts.lastChild.remove();
        log(logbox, `Evento ${line}`, sev==='h'?'bad':sev==='m'?'warn':'ok');
      }
    });
  }
  return { start(){ if(tm) return; alerts.innerHTML=''; logbox.innerHTML=''; tm=setInterval(draw, 80); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   10) HEATMAP — Patches & Inventário
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="heatmap"]'), (card)=>{
  const grid=card.querySelector('#heat'); const logbox=card.querySelector('#heat-log');
  const cells=14*7; grid.innerHTML=''; for(let i=0;i<cells;i++){ const iel=document.createElement('i'); grid.appendChild(iel); }
  let tm=null, t=0;
  function tick(){
    t++;
    grid.querySelectorAll('i').forEach((el,idx)=>{
      const r=Math.random();
      let col='#152055';
      if(r>.92) col='#ff6363';
      else if(r>.76) col='#ffd166';
      else if(r>.45) col='#19c37d';
      el.style.background = col;
      el.style.boxShadow = col!=='#152055' ? `0 0 8px ${col}AA` : 'inset 0 0 0 1px rgba(255,255,255,.06)';
    });
    if(Math.random()<.2) log(logbox, 'Novo patch crítico disponível para 6 ativos', 'warn');
  }
  return { start(){ if(tm) return; logbox.innerHTML=''; tm=setInterval(tick, 700); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   11) TIMELINE — Incidentes
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="timeline"]'), (card)=>{
  const ticks=card.querySelector('#ticks'); const track=card.querySelector('#track'); const dot=card.querySelector('#dot'); const logbox=card.querySelector('#tl-log');
  ticks.innerHTML = Array.from({length:12}).map(()=>'<i></i>').join('');
  let tm=null, p=0;
  function tick(){
    p=(p+1)%100; dot.style.left = (p)+'%';
    if(p%10===0){
      const evt=['Detecção IOC','Isolamento host','Reset credenciais','Bloqueio IP','Restauração backup'][randint(0,4)];
      log(logbox, `Marco: ${evt}`, 'ok');
    }
  }
  return { start(){ if(tm) return; logbox.innerHTML=''; p=0; tm=setInterval(tick, 120); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   12) BACKUP — Verificador
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="backup"]'), (card)=>{
  const src=card.querySelector('#bk-src'); const dst=card.querySelector('#bk-dst'); const logbox=card.querySelector('#bk-log');
  const files = Array.from({length:10}).map((_,i)=>({name:`/srv/proj/file_${i+1}.dat`, size: randint(2,40)+'MB'}));
  function render(){
    src.innerHTML=''; dst.innerHTML='';
    files.forEach(f=>{
      const row=document.createElement('div'); row.className='item'; row.innerHTML=`<span>${f.name}</span><small class="muted">${f.size}</small><div class="p"><div class="bar"></div></div>`;
      const row2=row.cloneNode(true);
      src.appendChild(row); dst.appendChild(row2);
    });
  }
  render();
  let tm=null, prog=0;
  function tick(){
    prog++;
    src.querySelectorAll('.bar').forEach(b=>{ const v=Math.min(100, (parseFloat(b.style.width)||0)+randint(5,18)); b.style.width=v+'%'; });
    dst.querySelectorAll('.bar').forEach(b=>{ const v=Math.min(100, (parseFloat(b.style.width)||0)+randint(3,15)); b.style.width=v+'%'; });
    if(Math.random()<.2) log(logbox, 'Checksum OK em amostra aleatória', 'ok');
    if(prog>18){ log(logbox, 'Validação concluída • amostra 100%', 'ok'); prog=0; src.querySelectorAll('.bar,.p').forEach(b=> b.style.width='0%'); dst.querySelectorAll('.bar,.p').forEach(b=> b.style.width='0%'); }
  }
  return { start(){ if(tm) return; logbox.innerHTML=''; prog=0; tm=setInterval(tick, 300); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   13) PHISH — Analisador
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="phish"]'), (card)=>{
  const box=card.querySelector('#phish'); const logbox=card.querySelector('#ph-log');
  const msgs=[
    {from:'suporte@micros0ft.com', sub:'Atualize sua senha', risk:.82},
    {from:'financeiro@empresa.com', sub:'Nota fiscal disponível', risk:.22},
    {from:'segmento@banco-alerta.com', sub:'Transação suspeita detectada', risk:.71},
    {from:'marketing@oferta.click', sub:'Cupom exclusivo vence hoje', risk:.58},
  ];
  function color(r){ return r>.75?'#ff6363':(r>.5?'#ffd166':'#19c37d'); }
  function render(){
    box.innerHTML='';
    msgs.forEach(m=>{
      const row=document.createElement('div'); row.className='mailrow';
      row.innerHTML=`<i class="sev" style="background:${color(m.risk)};width:10px;height:10px;border-radius:50%"></i>
        <div><b>${m.from}</b> — ${m.sub}</div>
        <span class="flag">score ${(m.risk*100|0)}%</span>`;
      box.appendChild(row);
    });
  }
  render();
  let tm=null;
  function tick(){
    const m=choice(msgs); m.risk=Math.min(1, Math.max(.05, m.risk + (Math.random()-.5)*.2));
    render();
    log(logbox, `Recomputado score para ${m.from}`, m.risk>.75?'bad':m.risk>.5?'warn':'ok');
  }
  return { start(){ if(tm) return; logbox.innerHTML=''; tm=setInterval(tick, 900); }, stop(){ clearInterval(tm); tm=null; } };
}));

/* ---------------------------------------------------------------
   14) DRIFT — Configuração
   --------------------------------------------------------------- */
controllers.push(
watchCard(document.querySelector('[data-anim="drift"]'), (card)=>{
  const base=card.querySelector('#cfg-base'); const live=card.querySelector('#cfg-live'); const logbox=card.querySelector('#df-log');
  const baseLines=[
    'PermitRootLogin no',
    'PasswordAuthentication no',
    'ClientAliveInterval 60',
    'ClientAliveCountMax 3',
    'MaxAuthTries 3',
    'AllowUsers svc_deploy ops_admin'
  ];
  function paint(arr){
    return arr.map(x=>{
      if(x.startsWith('+')) return `<div class="add"> ${x} </div>`;
      if(x.startsWith('-')) return `<div class="del"> ${x} </div>`;
      if(x.startsWith('~')) return `<div class="chg"> ${x} </div>`;
      return `<div> ${x} </div>`;
    }).join('');
  }
  let tm=null, flip=false;
  function tick(){
    flip=!flip;
    const liveLines = [...baseLines];
    if(flip){ liveLines[1]='PasswordAuthentication yes ~'; }
    if(Math.random()>.6){ liveLines.push('~ MaxSessions 10'); }
    base.innerHTML = paint(baseLines);
    live.innerHTML = paint(liveLines.map(s=>{
      if(s.includes('yes ~')) return '~ ' + s.replace(' ~','');
      if(s.startsWith('~')) return s;
      if(Math.random()>.8) return '+ ' + s;
      if(Math.random()>.8) return '- ' + s;
      return s;
    }));
    log(logbox, 'Drift reavaliado', 'warn');
  }
  return { start(){ if(tm) return; logbox.innerHTML=''; tm=setInterval(tick, 1100); }, stop(){ clearInterval(tm); tm=null; } };
}));

</script>
</body>
</html>

