<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>E-commerce • Distribuição & Engajamento — Carlos Henrique</title>
<style>
:root{
  --bg:#070b16; --fg:#eaf2ff; --muted:#9bb0d3;
  --surface:#0d1534; --surface2:#10183b; --surface3:#0f1a45;
  --line:#1a2550;
  --brand:#7c4dff; --accent:#20d3ff; --ok:#19c37d; --warn:#ffd166; --bad:#ff6363;
  --shadow:0 20px 44px rgba(0,0,0,.34); --radius:18px;
}

/* base */
*{box-sizing:border-box}
html,body{height:100%}
html,body{margin:0; overflow-x:hidden}
img,canvas,svg{display:block; max-width:100%}
a{color:inherit; text-decoration:none}
:focus-visible{outline:2px solid var(--accent); outline-offset:2px}

body{
  color:var(--fg);
  font:15px ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background:
    radial-gradient(1200px 700px at 10% 10%, rgba(124,77,255,.18), transparent 60%),
    radial-gradient(900px 600px at 90% 90%, rgba(32,211,255,.12), transparent 60%),
    var(--bg);
}
.wrap{max-width:1200px; margin:0 auto; padding:16px 20px; overflow-x:clip}
h1{margin:.6rem 0 .3rem; font-size:clamp(28px,6vw,44px); line-height:1.05}
.p{color:var(--muted); margin:0}

/* header */
header{position:sticky; top:0; z-index:50; backdrop-filter: blur(10px);
  background:rgba(7,11,22,.65); border-bottom:1px solid rgba(255,255,255,.06)}
.head{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
.nav{display:flex; gap:8px; flex-wrap:wrap}
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px; font-weight:900; cursor:pointer;
  padding:10px 14px; border-radius:999px; color:#0a0f20; background:linear-gradient(90deg,var(--brand),var(--accent)); box-shadow:0 10px 26px rgba(124,77,255,.35); border:none;
}
.btn.ghost{background:#22306a; color:#eaf2ff; box-shadow:none}
.badge{display:inline-flex; align-items:center; gap:6px; font-weight:800; padding:6px 10px; border-radius:999px; background:#13224e; border:1px solid rgba(255,255,255,.08); color:#cfe0ff}
.row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}

/* cards & grids */
.card{background:var(--surface2); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:14px; box-shadow:var(--shadow)}
.card h3{margin:0 0 6px}
.grid-3{display:grid; gap:12px; grid-template-columns:repeat(3,minmax(0,1fr))}
.grid-2{display:grid; gap:12px; grid-template-columns:repeat(2,minmax(0,1fr))}
.grid-4{display:grid; gap:12px; grid-template-columns:repeat(4,minmax(0,1fr))}
@media (max-width:1100px){ .grid-4{grid-template-columns:repeat(2,minmax(0,1fr))} }
@media (max-width:900px){ .grid-3,.grid-2,.grid-4{grid-template-columns:1fr} }

/* hero */
.hero{display:grid; grid-template-columns:1.1fr .9fr; gap:18px; align-items:center}
@media (max-width:980px){ .hero{grid-template-columns:1fr} }

/* float layer (acima da prévia) */
.float-layer{position:relative; height:64px; margin:10px 0 4px; overflow:hidden; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:linear-gradient(180deg, rgba(124,77,255,.08), rgba(32,211,255,.06))}
.float-layer .icon{position:absolute; font-size:18px; opacity:.9; animation:drift 9s linear infinite}
@keyframes drift{ from{ transform:translateX(-10%) translateY(0)} to{ transform:translateX(110%) translateY(-6px)} }

/* preview */
.preview{background:var(--surface); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:12px}
.modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(5,8,18,.6); z-index:80}
.modal .box{width:min(680px,92vw); background:var(--surface2); border:1px solid rgba(255,255,255,.1); border-radius:16px; padding:14px}

/* persuasive card above Resumo */
.value{background:linear-gradient(135deg, rgba(124,77,255,.20), rgba(32,211,255,.18)); border:1px solid rgba(255,255,255,.12)}

/* CMD */
.cmd{background:#000; color:#d6e0ff; border-radius:14px; border:1px solid rgba(255,255,255,.12); overflow:hidden; position:relative}
.cmd::before{content:""; position:absolute; inset:-2px; border-radius:16px; background:conic-gradient(from 0deg, rgba(124,77,255,.22), rgba(32,211,255,.22), transparent 40%); filter:blur(18px); z-index:0; animation:spin 18s linear infinite}
@keyframes spin{to{transform:rotate(1turn)}}
.cmd-inner{position:relative; z-index:1}
.cmd-head{display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.08)}
.dots{display:flex; gap:6px} .dot{width:10px; height:10px; border-radius:50%; background:#ff5f56} .dot:nth-child(2){background:#ffbd2e} .dot:nth-child(3){background:#27c93f}
.cmd-body{max-height:220px; overflow:auto; padding:12px; font:13px ui-monospace, Menlo, Consolas, monospace; line-height:1.45}
.cmd-controls{display:flex; gap:10px; padding:10px 12px; border-top:1px solid rgba(255,255,255,.08)}
.toggle-cmd{margin-left:auto}

/* canvases */
.canvas-shell{position:relative; border:1px solid rgba(255,255,255,.08); border-radius:14px; background:radial-gradient(800px 400px at 20% 30%, rgba(124,77,255,.18), transparent 60%), radial-gradient(800px 400px at 80% 70%, rgba(32,211,255,.14), transparent 60%)}
canvas{width:100%; height:300px}

/* products demo */
.products .item{display:grid; grid-template-columns:64px 1fr auto; gap:10px; align-items:center; background:var(--surface); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:10px; position:relative; overflow:hidden}
.products .item img{width:64px; height:64px; border-radius:12px; object-fit:cover}
.products .item::after{content:""; position:absolute; inset:0; background:linear-gradient(120deg, rgba(255,255,255,.06), transparent 40%); transform:translateX(-100%); animation:shine 7s ease-in-out infinite}
@keyframes shine{ 20%{transform:translateX(-100%)} 40%{transform:translateX(100%)} 100%{transform:translateX(100%)} }
.product-stats{display:flex; flex-direction:column; gap:6px; min-width:180px}
.mini{display:flex; align-items:center; gap:8px}
.meter{flex:1; height:8px; border-radius:6px; background:#18235a; border:1px solid rgba(255,255,255,.12); overflow:hidden}
.fill{height:100%; width:0%; background:linear-gradient(90deg, var(--brand), var(--accent))}
.bump{animation:bump .3s ease}
@keyframes bump{ 50%{transform:scale(1.06)} }

/* badges status */
.status{display:inline-flex; gap:8px; align-items:center}
.dotst{display:inline-block; width:10px; height:10px; border-radius:50%}
.dot-ok{background:var(--ok)} .dot-warn{background:var(--warn)} .dot-bad{background:var(--bad)}

/* toasts (tempestade de likes) */
.toast-wrap{position:absolute; inset:0; pointer-events:none}
.toast{position:absolute; background:#0b122e; border:1px solid rgba(255,255,255,.18); color:#cfe0ff; font:12px ui-sans-serif; padding:6px 8px; border-radius:10px; box-shadow:0 10px 22px rgba(0,0,0,.35); opacity:0; transform:translateY(12px); transition:.28s ease}
.toast.show{opacity:1; transform:translateY(0)}

/* reveal */
.section{margin-top:14px}
.reveal{opacity:0; transform: translateY(18px); transition:.6s ease}
.reveal.on{opacity:1; transform:none}
@media (prefers-reduced-motion: reduce){ .reveal{transition:none} }
.small{padding:8px 10px; font-size:.92rem}
.center{display:flex; align-items:center; justify-content:center}
</style>
</head>
<body>
<header>
  <div class="wrap head">
    <strong>E-commerce • Distribuição inteligente & automações</strong>
    <nav class="nav">
      <a class="btn" href="index.html">Início</a>
      <a class="btn ghost" href="projetos.html">Projetos</a>
      <a class="btn ghost" href="portfolio.html">Portfólio</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <!-- HERO + TEXTO -->
  <section class="hero section reveal">
    <div>
      <h1>Transforme visitas em vendas — no piloto automático</h1>
      <p class="p">
        Eu não entrego apenas um site. Eu instalo um <b>motor de crescimento</b>:
        integrações com <b>APIs</b>, <b>bots</b> que distribuem e respondem 24/7 e <b>IA</b> otimizando
        audiência, cliques e ROAS. Você acompanha tudo em tempo real — curtidas, tráfego, carrinhos e <b>R$ receita</b>.
      </p>

      <!-- animação de fundo acima da prévia -->
      <div class="float-layer" aria-hidden="true" id="float"></div>

      <div class="preview">
        <div class="row">
          <div class="status"><span class="dotst dot-ok"></span>Prévia ativa</div>
          <button class="btn small" id="openPreview">Ver Prévia</button>
        </div>
        <p class="p" style="margin-top:6px">
          Clique em <b>Ver Prévia</b> e veja como orquestramos canais, equilibramos budget via ML e automatizamos relacionamento para você vender mais — com menos esforço.
        </p>
      </div>
    </div>

    <div>
      <!-- card persuasivo -->
      <div class="card value" style="margin-bottom:12px">
        <h3>Site + APIs + Bots + IA = mais vendas</h3>
        <ul class="p" style="margin:6px 0 0; padding-left:18px">
          <li><b>Catálogo vivo</b>: preços, estoque e variações sincronizados.</li>
          <li><b>ShareBots</b>: posts, respostas e campanhas automáticas por canal.</li>
          <li><b>ML</b>: identifica criativos campeões e redistribui investimento.</li>
          <li><b>Relatórios claros</b>: métricas que viram ação (e conversão).</li>
        </ul>
      </div>

      <div class="card">
        <h3>Resumo</h3>
        <ul class="p" style="margin:6px 0 0; padding-left:18px">
          <li>Integrações com ERP, pagamentos e logística</li>
          <li>Distribuição para redes, afiliados e e-mail com UTMs</li>
          <li>Rastreamento de cliques, curtidas, carrinhos e compras</li>
          <li>Machine Learning para prever e escalar as melhores peças</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- MODAL PRÉVIA -->
  <div class="modal" id="modal">
    <div class="box">
      <div class="row" style="justify-content:space-between">
        <b>Prévia — Como o motor de distribuição funciona</b>
        <button class="btn small" id="closePreview">Fechar</button>
      </div>
      <p class="p" style="margin-top:8px">
        1) Importamos seu catálogo e geramos versões por canal.<br>
        2) <b>ShareBots</b> segmentam públicos e disparam postagens com UTM.<br>
        3) O módulo de <b>ML</b> realoca budget para os criativos com maior CTR/ROAS.<br>
        4) Você recebe <b>provas de impacto</b> em tempo real: cliques, curtidas, carrinhos e compras.
      </p>
    </div>
  </div>

  <!-- ====== 3 MEGA ANIMAÇÕES (COM CMD + AUTO-RUN POR VISIBILIDADE) ====== -->
  <section class="section reveal">
    <div class="grid-3">
      <!-- 1) GALÁXIA DE COMPARTILHAMENTO -->
      <div class="card anim-card" id="card-galaxy">
        <h3>Galáxia de Compartilhamento</h3>
        <div class="canvas-shell"><canvas id="cvGalaxy" height="300"></canvas></div>
        <div class="row tools" style="margin-top:8px">
          <button class="btn small" id="galStart">▷ Iniciar</button>
          <button class="btn small" id="galStop">⏸ Parar</button>
          <button class="btn small toggle-cmd" data-toggle="cmd-gal">Abrir CMD</button>
        </div>
        <div class="cmd" id="cmd-gal" hidden>
          <div class="cmd-inner">
            <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>share-galaxy run</b></div>
            <div class="cmd-body" id="log-gal"></div>
            <div class="cmd-controls"><button class="btn small" id="galClear">🧹 Limpar</button></div>
          </div>
        </div>
      </div>

      <!-- 2) TEMPESTADE DE CLIQUES (turbinada) -->
      <div class="card anim-card" id="card-clicks" style="position:relative">
        <h3>Tempestade de Cliques & ❤️</h3>
        <div class="canvas-shell" style="position:relative">
          <canvas id="cvClicks" height="300" title="Clique no canvas para disparar onde quiser"></canvas>
          <div class="toast-wrap" id="clkToasts"></div>
        </div>
        <div class="row tools" style="margin-top:8px">
          <button class="btn small" id="clkBurst">✨ Disparar campanha</button>
          <button class="btn small toggle-cmd" data-toggle="cmd-clk">Abrir CMD</button>
        </div>
        <div class="cmd" id="cmd-clk" hidden>
          <div class="cmd-inner">
            <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>click-storm</b></div>
            <div class="cmd-body" id="log-clk"></div>
            <div class="cmd-controls"><button class="btn small" id="clkClear">🧹 Limpar</button></div>
          </div>
        </div>
      </div>

      <!-- 3) ESTEIRA DE DISTRIBUIÇÃO -->
      <div class="card anim-card" id="card-est">
        <h3>Esteira de Distribuição</h3>
        <div class="canvas-shell center" style="height:300px; position:relative" id="conveyor">
          <div id="rail" style="position:absolute; left:6%; right:6%; top:50%; height:12px; transform:translateY(-50%); background:linear-gradient(90deg, rgba(255,255,255,.18) 50%, transparent 50%); background-size:34px 12px; border:1px solid rgba(255,255,255,.12); border-radius:999px"></div>
        </div>
        <div class="row tools" style="margin-top:8px">
          <button class="btn small" id="estStart">▷ Iniciar</button>
          <button class="btn small" id="estStop">⏸ Parar</button>
          <button class="btn small toggle-cmd" data-toggle="cmd-est">Abrir CMD</button>
        </div>
        <div class="cmd" id="cmd-est" hidden>
          <div class="cmd-inner">
            <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>distrib/esteira</b></div>
            <div class="cmd-body" id="log-est"></div>
            <div class="cmd-controls"><button class="btn small" id="estClear">🧹 Limpar</button></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PRODUTOS DEMO + STREAM (mantidos) -->
  <section class="section reveal products">
    <div class="card">
      <h3>Produtos (demo)</h3>
      <div class="grid-3" id="prodGrid">
        <div class="item" data-views="1200" data-sold="32">
          <img src="https://picsum.photos/seed/a/120/120" alt="">
          <div style="min-width:0">
            <b>Camiseta Aurora</b>
            <div class="p">Dry-fit, envio rápido</div>
            <div class="row" style="margin-top:6px">
              <div class="mini" title="Views">
                👀 <div class="meter" style="width:120px"><div class="fill" data-fill></div></div>
                <b id="v0">0</b>
              </div>
            </div>
          </div>
          <div class="product-stats">
            <div class="mini">🛍 Vendidos: <b id="s0">0</b></div>
            <div class="mini">⭐ Avaliação: <b>4,8</b></div>
          </div>
        </div>

        <div class="item" data-views="980" data-sold="21">
          <img src="https://picsum.photos/seed/b/120/120" alt="">
          <div style="min-width:0">
            <b>Tênis Flux</b>
            <div class="p">Leve e confortável</div>
            <div class="row" style="margin-top:6px">
              <div class="mini">
                👀 <div class="meter" style="width:120px"><div class="fill" data-fill></div></div>
                <b id="v1">0</b>
              </div>
            </div>
          </div>
          <div class="product-stats">
            <div class="mini">🛍 Vendidos: <b id="s1">0</b></div>
            <div class="mini">⭐ Avaliação: <b>4,6</b></div>
          </div>
        </div>

        <div class="item" data-views="760" data-sold="15">
          <img src="https://picsum.photos/seed/c/120/120" alt="">
          <div style="min-width:0">
            <b>Mochila Neo</b>
            <div class="p">Waterproof</div>
            <div class="row" style="margin-top:6px">
              <div class="mini">
                👀 <div class="meter" style="width:120px"><div class="fill" data-fill></div></div>
                <b id="v2">0</b>
              </div>
            </div>
          </div>
          <div class="product-stats">
            <div class="mini">🛍 Vendidos: <b id="s2">0</b></div>
            <div class="mini">⭐ Avaliação: <b>4,7</b></div>
          </div>
        </div>
      </div>
    </div>

    <!-- CMD contínuo pós-demos -->
    <div class="card" style="margin-top:12px">
      <h3>Stream de Eventos (tempo real)</h3>
      <div class="cmd">
        <div class="cmd-inner">
          <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>social-stream</b></div>
          <div class="cmd-body" id="streamBody"></div>
          <div class="cmd-controls">
            <button class="btn small" id="streamPause">⏸ Pausar</button>
            <button class="btn small" id="streamClear">🧹 Limpar</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ====== 6 ANIMAÇÕES EXTRAS (mantidas) ====== -->
  <section class="section reveal">
    <div class="grid-3">
      <div class="card">
        <h3>Mapa de Engajamento (views)</h3>
        <div class="canvas-shell"><canvas id="cvHeat" height="300"></canvas></div>
        <div class="p" style="margin-top:8px">Células aquecem conforme regiões recebem tráfego.</div>
      </div>

      <div class="card">
        <h3>Meta de Seguidores</h3>
        <div class="canvas-shell"><canvas id="cvDonut" height="300"></canvas></div>
        <div class="row" style="margin-top:8px">
          <span class="badge">Objetivo: 120k</span><span class="badge" id="donutVal">Atual: 0</span>
        </div>
      </div>

      <div class="card">
        <h3>Enxame de ShareBots</h3>
        <div class="canvas-shell"><canvas id="cvSwarm" height="300"></canvas></div>
        <div class="p" style="margin-top:8px">Bots navegam até clusters com maior propensão.</div>
      </div>

      <div class="card">
        <h3>Receita ao Vivo</h3>
        <div class="canvas-shell"><canvas id="cvCash" height="300"></canvas></div>
        <div class="row" style="margin-top:8px"><span class="badge"><b id="cashNow">R$ 0</b> hoje</span></div>
      </div>

      <div class="card">
        <h3>Órbita Viral</h3>
        <div class="canvas-shell"><canvas id="cvOrbit" height="300"></canvas></div>
        <div class="p" style="margin-top:8px">Perfis orbitam a marca e ampliam o alcance.</div>
      </div>

      <div class="card">
        <h3>Feed Ao Vivo</h3>
        <div class="canvas-shell" style="height:auto">
          <div id="ticker" class="p" style="padding:12px; min-height:60px"></div>
        </div>
        <div class="row tools" style="margin-top:8px"><button class="btn small" id="tkClear">Limpar</button></div>
      </div>
    </div>
  </section>
</main>

<script>
/* ===== helpers ===== */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
const rand = (a,b)=>Math.floor(Math.random()*(b-a+1))+a;
const NAMES = ["Ana","Bruno","Carla","Diego","Eva","Fábio","Gabi","Heitor","Iris","João","Kai","Larissa","Mauro","Nina","Otto","Paula","Rael","Sofia","Tiago","Vini","Wes","Yara","Zeca","Lia","Guto","Noa"];
const CHANS = ["Instagram","TikTok","YouTube","Facebook","E-mail","Afiliados","WhatsApp"];

/* reveal on view */
const IO = new IntersectionObserver(ents=>{
  ents.forEach(e=>{if(e.isIntersecting){e.target.classList.add('on'); IO.unobserve(e.target);}});
},{threshold:.12});
$$('.reveal').forEach(el=>IO.observe(el));

/* modal prévia */
$('#openPreview').onclick = ()=> $('#modal').style.display='grid';
$('#closePreview').onclick = ()=> $('#modal').style.display='none';
$('#modal').addEventListener('click',(e)=>{ if(e.target.id==='modal') $('#modal').style.display='none'; });

/* toggle CMDs */
$$('[data-toggle]').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const id = btn.getAttribute('data-toggle');
    const box = $('#'+id);
    const open = !box.hasAttribute('hidden');
    $$('.cmd').forEach(c=> c.setAttribute('hidden',''));
    if(!open) box.removeAttribute('hidden');
  });
});

/* ===== animação flutuante acima da prévia ===== */
(()=>{
  const host = $('#float');
  const icons = ['🔁','❤️','🖱','💬','$','🚀','📈'];
  for(let i=0;i<14;i++){
    const s = document.createElement('span');
    s.className='icon';
    s.textContent = icons[rand(0,icons.length-1)];
    s.style.left = rand(-10, 100)+'%';
    s.style.top  = rand(5, 70)+'%';
    s.style.animationDelay = (-rand(0,900)/100)+'s';
    host.appendChild(s);
  }
})();

/* ========= VISIBILITY UTILS ========= */
function autoRunner(cardEl, start, stop, state){
  // state: {running:false, manualPause:false}
  const obs = new IntersectionObserver(ents=>{
    ents.forEach(e=>{
      if(e.isIntersecting){
        if(!state.manualPause && !state.running){ start('auto'); }
      }else{
        if(state.running){ stop('auto'); }
      }
    });
  },{threshold:.35});
  obs.observe(cardEl);
  // pausa quando a aba perde foco
  document.addEventListener('visibilitychange', ()=>{
    if(document.hidden){ if(state.running) stop('hidden'); }
    else{
      const r = cardEl.getBoundingClientRect();
      const inView = r.top < window.innerHeight*0.75 && r.bottom > window.innerHeight*0.25;
      if(inView && !state.manualPause && !state.running) start('visible');
    }
  });
}

/* ========= 1) GALÁXIA DE COMPARTILHAMENTO ========= */
(()=>{
  const card = $('#card-galaxy');
  const cv = $('#cvGalaxy'), ctx=cv.getContext('2d'); let raf=0;
  const state = {running:false, manualPause:false};
  function size(){ cv.width=cv.clientWidth; cv.height=300; } size(); addEventListener('resize', size);
  const nodes = Array.from({length:36}, ()=>({x:Math.random(), y:Math.random(), v:(Math.random()*.6+.2)}));
  let t=0, logTimer=null;
  function log(msg){ const el = $('#log-gal'); const p=document.createElement('div'); p.textContent=`[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${msg}`; el.appendChild(p); el.scrollTop=el.scrollHeight; }
  function tickLogs(){
    const who = NAMES[rand(0,NAMES.length-1)];
    const act = Math.random();
    if(act<.45) log(`Alcance: conteúdo chegou para ${who} • ${CHANS[rand(0,CHANS.length-1)]}`);
    else if(act<.8) log(`Curtida: ${who} curtiu ❤️`);
    else if(act<.93) log(`Clique: ${who} abriu o link`);
    else log(`Compra: ${who} finalizou checkout • valor R$ ${rand(39,899)},90 ✅`);
  }
  function draw(){
    if(!state.running) return;
    const w=cv.width, h=cv.height; t+=0.01; ctx.clearRect(0,0,w,h);
    for(let i=0;i<nodes.length;i++){
      for(let j=i+1;j<nodes.length;j++){
        const a=nodes[i], b=nodes[j], ax=a.x*w, ay=a.y*h, bx=b.x*w, by=b.y*h;
        const d=Math.hypot(ax-bx, ay-by);
        if(d<140){ ctx.strokeStyle=`rgba(137,201,255,${1-d/140})`; ctx.lineWidth=1; ctx.beginPath(); ctx.moveTo(ax,ay); ctx.lineTo(bx,by); ctx.stroke(); }
      }
    }
    nodes.forEach((n,i)=>{
      const px = n.x*w + Math.cos(t*n.v+i)*8;
      const py = n.y*h + Math.sin(t*n.v+i)*8;
      ctx.beginPath(); ctx.arc(px,py,3,0,Math.PI*2); ctx.fillStyle='rgba(255,255,255,.95)'; ctx.fill();
      ctx.beginPath(); ctx.arc(px,py,8+Math.sin(t*3+i)*3,0,Math.PI*2);
      ctx.strokeStyle='rgba(124,77,255,.65)'; ctx.stroke();
    });
    raf=requestAnimationFrame(draw);
  }
  function start(src){
    if(state.running) return;
    state.running=true;
    draw();
    log(`share-galaxy iniciado (${src})`);
    logTimer=setInterval(tickLogs, 900);
  }
  function stop(src){
    if(!state.running) return;
    state.running=false;
    cancelAnimationFrame(raf);
    clearInterval(logTimer);
    log(`share-galaxy pausado (${src})`);
  }
  // botões (override manual)
  $('#galStart').onclick=()=>{ state.manualPause=false; start('manual'); };
  $('#galStop').onclick =()=>{ state.manualPause=true;  stop('manual');  };
  $('#galClear').onclick=()=> $('#log-gal').innerHTML='';
  // auto-run por visibilidade
  autoRunner(card, start, stop, state);
})();

/* ========= 2) TEMPESTADE DE CLIQUES (com modo ambiente auto) ========= */
(()=>{
  const card = $('#card-clicks');
  const cv=$('#cvClicks'), ctx=cv.getContext('2d'); function size(){ cv.width=cv.clientWidth; cv.height=300; } size(); addEventListener('resize', size);
  let parts=[], rings=[]; let ambient=null;
  const state={running:false, manualPause:false};
  const glyphs = ['❤️','🖱','🔁','🛒','$'];
  function burstAt(x,y){
    for(let i=0;i<160;i++){
      const a=Math.random()*Math.PI*2, sp=Math.random()*2.4+.6;
      parts.push({x,y,vx:Math.cos(a)*sp,vy:Math.sin(a)*sp,life:rand(40,90),ch:glyphs[rand(0,glyphs.length-1)]});
    }
    rings.push({x,y,r:6,life:40});
    toast(x,y);
    logEvent();
    draw();
  }
  function draw(){
    if(!state.running && parts.length===0 && rings.length===0) return;
    ctx.fillStyle='rgba(11,18,46,.26)'; ctx.fillRect(0,0,cv.width,cv.height);
    rings.forEach(r=>{ r.r+=2.2; r.life--; ctx.strokeStyle=`rgba(124,77,255,${r.life/40})`; ctx.lineWidth=2; ctx.beginPath(); ctx.arc(r.x,r.y,r.r,0,6.28); ctx.stroke(); });
    rings=rings.filter(r=>r.life>0);
    parts.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; p.vy+=.02; p.life--;
      ctx.save(); ctx.font='18px system-ui, sans-serif'; ctx.translate(p.x,p.y); ctx.globalAlpha=Math.max(0,p.life/90); ctx.fillText(p.ch,0,0); ctx.restore();
    });
    parts = parts.filter(p=>p.life>0);
    requestAnimationFrame(draw);
  }
  function randIn(a,b){return Math.random()*(b-a)+a}
  function toast(x,y){
    const host = $('#clkToasts');
    const t = document.createElement('div'); t.className='toast';
    const who=NAMES[rand(0,NAMES.length-1)];
    const opts = [
      `🔁 ${who} compartilhou seu link`,
      `🛒 ${who} adicionou ao carrinho`,
      `🖱 ${who} clicou no criativo A/B`,
      `❤️ ${who} curtiu seu post`,
      `✅ ${who} concluiu a compra`
    ];
    t.textContent = opts[rand(0,opts.length-1)];
    const bb = host.getBoundingClientRect();
    t.style.left = Math.min(Math.max(8, x - bb.left + randIn(-40,40)), bb.width-160) + 'px';
    t.style.top  = Math.min(Math.max(8, y - bb.top  + randIn(-30,30)),  bb.height-36) + 'px';
    host.appendChild(t);
    requestAnimationFrame(()=> t.classList.add('show'));
    setTimeout(()=>{ t.style.opacity='0'; t.style.transform='translateY(-8px)'; setTimeout(()=>t.remove(),260); }, 1400);
  }
  function logEvent(){
    const el=$('#log-clk'); const p=document.createElement('div');
    const who=NAMES[rand(0,NAMES.length-1)];
    const r=Math.random();
    let msg='Clique registrado';
    if(r<.25) msg=`🔁 Compartilhado por ${who}`;
    else if(r<.5) msg=`🛒 Adicionado ao carrinho por ${who}`;
    else if(r<.75) msg=`❤️ Curtida por ${who}`;
    else msg=`✅ Compra por ${who} • R$ ${rand(59,1299)},90`;
    p.textContent=`[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${msg}`; el.appendChild(p); el.scrollTop=el.scrollHeight;
  }
  // Modo ambiente: bursts leves esporádicos quando em view
  function start(){
    if(state.running) return; state.running=true;
    ambient = setInterval(()=>{
      const x = rand(40, cv.width-40), y = rand(40, cv.height-40);
      // mini burst
      for(let i=0;i<36;i++){
        const a=Math.random()*Math.PI*2, sp=Math.random()*1.2+.2;
        parts.push({x,y,vx:Math.cos(a)*sp,vy:Math.sin(a)*sp,life:rand(20,40),ch:glyphs[rand(0,glyphs.length-1)]});
      }
      rings.push({x,y,r:4,life:26});
      if(Math.random()<.45) logEvent();
      draw();
    }, 1400);
  }
  function stop(){
    state.running=false;
    clearInterval(ambient); ambient=null;
  }
  // botões e interação
  $('#clkBurst').onclick=()=> burstAt(cv.width/2, cv.height/2);
  cv.addEventListener('click', e=>{
    const rect=cv.getBoundingClientRect(); burstAt(e.clientX-rect.left, e.clientY-rect.top);
  });
  $('#clkClear').onclick=()=> $('#log-clk').innerHTML='';
  // visibilidade
  autoRunner(card, ()=>{ if(!state.manualPause) start(); }, stop, state);
})();

/* ========= 3) ESTEIRA DE DISTRIBUIÇÃO ========= */
(()=>{
  const card = $('#card-est');
  const rail = $('#rail'); const area = $('#conveyor'); let timer=null, scrollTimer=null;
  const state={running:false, manualPause:false};
  const hubs = ["IG","TT","YT","FB","WA","AF","EM"];
  function addBox(){
    const box = document.createElement('div');
    box.style.cssText="position:absolute; top:50%; transform:translateY(-50%); left:-70px; width:54px; height:34px; border-radius:10px; background:linear-gradient(90deg,#7c4dff,#20d3ff); box-shadow:0 10px 24px rgba(0,0,0,.35)";
    area.appendChild(box);
    const dest = hubs[rand(0,hubs.length-1)];
    const badge = document.createElement('div');
    badge.textContent=dest;
    badge.style.cssText="position:absolute; right:-10px; top:-12px; font-weight:900; font-size:12px; background:#0b122e; border:1px solid rgba(255,255,255,.2); padding:4px 6px; border-radius:999px";
    box.appendChild(badge);
    let x=-70, w=area.clientWidth+40; const dur = rand(4,7);
    const iv=setInterval(()=>{
      x+= (w+70)/(dur*60);
      box.style.left=x+'px';
      if(x>w){ clearInterval(iv); box.remove(); log(`Distribuído para ${dest} • ${NAMES[rand(0,NAMES.length-1)]} abriu o link`); if(Math.random()<.24) log(`Compra confirmada • R$ ${rand(49,899)},90 ✅`); }
    }, 1000/60);
  }
  function log(msg){ const el=$('#log-est'); const p=document.createElement('div'); p.textContent=`[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${msg}`; el.appendChild(p); el.scrollTop=el.scrollHeight; }
  function start(src){
    if(state.running) return;
    state.running=true;
    timer=setInterval(addBox, 800);
    scrollTimer=setInterval(()=>{ rail.style.backgroundPositionX=(parseInt(getComputedStyle(rail).backgroundPositionX||'0')-30)+'px';}, 600);
    log('Esteira iniciada '+(src?`(${src})`:''));
  }
  function stop(src){
    if(!state.running) return;
    state.running=false;
    clearInterval(timer); timer=null;
    clearInterval(scrollTimer); scrollTimer=null;
    log('Esteira pausada '+(src?`(${src})`:''));
  }
  $('#estStart').onclick=()=>{ state.manualPause=false; start('manual'); };
  $('#estStop').onclick =()=>{ state.manualPause=true;  stop('manual');  };
  $('#estClear').onclick=()=> $('#log-est').innerHTML='';
  autoRunner(card, ()=>{ if(!state.manualPause) start('auto'); }, stop, state);
})();

/* ========= PRODUTOS DEMO — contadores e animações ========= */
(()=>{
  const items = $$('#prodGrid .item');
  const viewEls = [$('#v0'),$('#v1'),$('#v2')];
  const soldEls = [$('#s0'),$('#s1'),$('#s2')];
  const fills   = $$('#prodGrid [data-fill]');
  const IO2 = new IntersectionObserver(ents=>{
    ents.forEach(e=>{
      if(e.isIntersecting){
        const el=e.target; IO2.unobserve(el);
        const idx=[...items].indexOf(el);
        const targetViews = +el.dataset.views, targetSold = +el.dataset.sold;
        countTo(viewEls[idx], targetViews, 900);
        countTo(soldEls[idx], targetSold, 900);
        animateMeter(fills[idx], targetViews);
      }
    });
  },{threshold:.35});
  items.forEach(it=>IO2.observe(it));

  function countTo(el, target, dur){
    const t0=performance.now(); const start=0;
    (function tick(T){
      const p=Math.min(1,(T-t0)/dur); const v=Math.floor(start + (target-start)*(0.2+0.8*Math.pow(p,0.85)));
      el.textContent=v.toLocaleString('pt-BR');
      if(p<1) requestAnimationFrame(tick);
    })(t0);
  }
  function animateMeter(fill, views){
    const pct=Math.min(100, 20 + Math.log10(views+10)*18);
    requestAnimationFrame(()=>{ fill.style.width=pct+'%'; });
  }
  setInterval(()=>{
    const i=rand(0,items.length-1);
    const soldEl=soldEls[i]; const cur=parseInt(soldEl.textContent||'0'); soldEl.textContent=(cur+1).toString();
    const item=items[i]; item.classList.add('bump'); setTimeout(()=>item.classList.remove('bump'),260);
  }, 3500);
})();

/* ========= 4) HEATMAP ========= */
(()=>{
  const cv=$('#cvHeat'), ctx=cv.getContext('2d'); function size(){ cv.width=cv.clientWidth; cv.height=300; } size(); addEventListener('resize', size);
  let z=0; (function tick(){
    const w=cv.width,h=cv.height; ctx.clearRect(0,0,w,h);
    const cell=20;
    for(let y=0;y<h;y+=cell){
      for(let x=0;x<w;x+=cell){
        const n = Math.sin((x+z)*.02)*Math.cos((y+z)*.018);
        const v = Math.floor((n+1)*127);
        ctx.fillStyle=`rgba(${20+v}, ${60+v}, 180, .65)`;
        ctx.fillRect(x+2,y+2,cell-4,cell-4);
      }
    }
    z+=1.4; requestAnimationFrame(tick);
  })();
})();

/* ========= 5) DONUT ========= */
(()=>{
  const cv=$('#cvDonut'), ctx=cv.getContext('2d'); function size(){ cv.width=cv.clientWidth; cv.height=300; } size(); addEventListener('resize', size);
  let cur = 0, goal=120000;
  function draw(){
    const w=cv.width,h=cv.height, r=Math.min(w,h)*.28, cx=w/2, cy=h/2;
    ctx.clearRect(0,0,w,h);
    ctx.lineWidth=20; ctx.strokeStyle='rgba(255,255,255,.12)'; ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2); ctx.stroke();
    const pct = Math.min(1, cur/goal), a=pct*Math.PI*2;
    const grad=ctx.createLinearGradient(0,0,w,0); grad.addColorStop(0,'#7c4dff'); grad.addColorStop(1,'#20d3ff');
    ctx.strokeStyle=grad; ctx.beginPath(); ctx.arc(cx,cy,r,-Math.PI/2,-Math.PI/2+a); ctx.stroke();
    ctx.font='bold 28px ui-sans-serif'; ctx.fillStyle='#eaf2ff'; ctx.textAlign='center';
    ctx.fillText((cur).toLocaleString('pt-BR')+' seg.', cx, cy+8);
  }
  function step(){ cur += Math.floor(Math.max(1, (goal-cur)*.02)); $('#donutVal').textContent='Atual: '+cur.toLocaleString('pt-BR'); draw(); if(cur<goal) requestAnimationFrame(step); }
  step();
})();

/* ========= 6) ENXAME SHAREBOTS ========= */
(()=>{
  const cv=$('#cvSwarm'), ctx=cv.getContext('2d'); function size(){ cv.width=cv.clientWidth; cv.height=300; } size(); addEventListener('resize', size);
  const bots = Array.from({length:22}, ()=>({x:Math.random(), y:Math.random(), a:Math.random()*6.28, s:.6+Math.random()*1.2}));
  (function tick(){
    const w=cv.width,h=cv.height; ctx.clearRect(0,0,w,h);
    bots.forEach(b=>{
      b.a += (Math.random()-.5)*.3;
      b.x += Math.cos(b.a)*b.s/400; b.y += Math.sin(b.a)*b.s/400;
      if(b.x<0) b.x=1; if(b.x>1) b.x=0; if(b.y<0) b.y=1; if(b.y>1) b.y=0;
      const x=b.x*w, y=b.y*h;
      ctx.font='16px system-ui'; ctx.fillText('🤖',x,y);
      const tx = w*.75, ty = h*.25; ctx.strokeStyle='rgba(32,211,255,.2)'; ctx.beginPath(); ctx.moveTo(x,y); ctx.lineTo(tx,ty); ctx.stroke();
    });
    ctx.beginPath(); ctx.arc(w*.75,h*.25,14,0,6.28); ctx.fillStyle='rgba(124,77,255,.6)'; ctx.fill();
    requestAnimationFrame(tick);
  })();
})();

/* ========= 7) CASH RAIN ========= */
(()=>{
  const cv=$('#cvCash'), ctx=cv.getContext('2d'); function size(){ cv.width=cv.clientWidth; cv.height=300; } size(); addEventListener('resize', size);
  let drops=[]; let total=0;
  function spawn(){ drops.push({x:Math.random()*cv.width, y:-10, vy:1+Math.random()*1.6, ch:'$'}); }
  function draw(){
    ctx.fillStyle='rgba(12,21,52,.25)'; ctx.fillRect(0,0,cv.width,cv.height);
    drops.forEach(d=>{ d.y+=d.vy; ctx.font='18px system-ui'; ctx.fillText(d.ch,d.x,d.y); });
    drops=drops.filter(d=>{ if(d.y>cv.height-10){ total+=rand(1,30)*10; $('#cashNow').textContent='R$ '+total.toLocaleString('pt-BR'); return false;} return true; });
    requestAnimationFrame(draw);
  }
  setInterval(()=>{ spawn(); if(Math.random()<.25) spawn(); }, 160);
  draw();
})();

/* ========= 8) ÓRBITA VIRAL ========= */
(()=>{
  const cv=$('#cvOrbit'), ctx=cv.getContext('2d'); function size(){ cv.width=cv.clientWidth; cv.height=300; } size(); addEventListener('resize', size);
  let t=0; const peeps=['👩🏽‍💻','🧑🏻‍🎤','🧑🏾‍🍳','👨🏼‍🏫','🧑🏿‍🚀','🧑‍🎨','🧑‍💼','🧑‍🔧'];
  (function tick(){
    const w=cv.width,h=cv.height,cx=w/2,cy=h/2; t+=.015; ctx.clearRect(0,0,w,h);
    ctx.beginPath(); ctx.arc(cx,cy,18,0,6.28); ctx.fillStyle='#7c4dff'; ctx.fill(); ctx.font='bold 14px ui-sans-serif'; ctx.fillStyle='#0b122e'; ctx.textAlign='center'; ctx.fillText('BR',cx,cy+5);
    for(let r=44;r<=120;r+=26){ ctx.strokeStyle='rgba(255,255,255,.18)'; ctx.beginPath(); ctx.arc(cx,cy,r,0,6.28); ctx.stroke(); }
    peeps.forEach((p,i)=>{ const r=60+i*6; const a=t* (1.1 + i*.08) + i; const x=cx+Math.cos(a)*r, y=cy+Math.sin(a)*r; ctx.font='18px system-ui'; ctx.fillText(p,x,y); });
    requestAnimationFrame(tick);
  })();
})();

/* ========= 9) FEED AO VIVO ========= */
(()=>{
  const box=$('#ticker');
  function push(t){ const p=document.createElement('div'); p.textContent=`[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${t}`; box.appendChild(p); box.scrollTop=box.scrollHeight; }
  setInterval(()=>{
    const who=NAMES[rand(0,NAMES.length-1)];
    const r=Math.random();
    if(r<.5) push(`${who} viu seu anúncio em ${CHANS[rand(0,CHANS.length-1)]}`);
    else if(r<.78) push(`${who} curtiu ❤️`);
    else if(r<.92) push(`${who} clicou no link`);
    else push(`${who} comprou — R$ ${rand(49,1299)},90 ✅`);
  }, 900);
  $('#tkClear').onclick=()=> box.innerHTML='';
})();

/* ===== CMD contínuo pós-demos ===== */
(()=>{
  const body=$('#streamBody'), pause=$('#streamPause'), clear=$('#streamClear');
  let stopped=false;
  function line(t){ const p=document.createElement('div'); p.textContent=`[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${t}`; body.appendChild(p); body.scrollTop=body.scrollHeight; }
  function tick(){
    if(stopped) return;
    const who=NAMES[rand(0,NAMES.length-1)];
    const acts=[
      `🔁 ${who} compartilhou seu link`,
      `✅ ${who} comprou pelo seu link`,
      `📅 ${who} agendou uma consulta — confira seu e-mail`,
      `🛒 ${who} adicionou 2 itens ao carrinho`,
      `💬 ${who} enviou mensagem no WhatsApp`,
      `⭐ ${who} avaliou seu produto (5 estrelas)`,
      `📈 ${who} trouxe 3 visitas por indicação`
    ];
    line(acts[rand(0,acts.length-1)]);
  }
  const iv=setInterval(tick, 1100);
  pause.onclick=()=>{ stopped=!stopped; pause.textContent = stopped ? '▶ Retomar' : '⏸ Pausar'; };
  clear.onclick=()=> body.innerHTML='';
})();
</script>
</body>
</html>