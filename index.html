<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Projetos | T.I. & Automa√ß√£o ‚Äî Carlos Henrique</title>

<!-- Anima√ß√µes -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>

<style>
/* ============================= VARS/TEMA ============================= */
:root{
  --bg:#070b16; --card:#10183b; --surface:#0d1534;
  --text:#eaf2ff; --muted:#9bb0d3; --accent:#20d3ff; --brand:#7c4dff;
  --border:rgba(255,255,255,.10); --shadow:0 18px 40px rgba(0,0,0,.38);
  --ok:#00e6d1; --warn:#ffb24d; --err:#ff6b6b;
}
*{ box-sizing:border-box }
html{ scroll-behavior:smooth }
body{
  margin:0; color:var(--text); font-family:'Segoe UI',system-ui,Arial,sans-serif;
  background:
    radial-gradient(1200px 700px at 10% 10%, rgba(124,77,255,.18), transparent 60%),
    radial-gradient(900px 600px at 90% 90%, rgba(32,211,255,.12), transparent 60%),
    var(--bg);
}
.container{ max-width:1100px; margin:0 auto; padding:0 16px; }
.section{ padding:56px 0; opacity:0; transform:translateY(28px); transition:opacity .7s, transform .7s }
.section.visible{ opacity:1; transform:none }
.muted{ color:var(--muted) }
h1,h2,h3{ margin:0 0 10px }
a.btn,button.btn{ display:inline-flex; align-items:center; gap:8px; border-radius:12px; padding:10px 14px; font-weight:900; text-decoration:none; border:1px solid var(--border); color:var(--text); background:var(--card); box-shadow:var(--shadow); cursor:pointer; }
.btn.primary{ background:linear-gradient(90deg,var(--brand),var(--accent)); color:#0a1020; border-color:transparent }
.btn.small{ padding:8px 10px; font-size:.92rem }
.badge{ display:inline-flex; align-items:center; gap:6px; font-weight:800; padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:var(--surface); }

/* ============================= HEADER ============================= */
header{ position:sticky; top:0; z-index:50; background:rgba(7,11,22,.65); backdrop-filter:saturate(120%) blur(8px); border-bottom:1px solid rgba(255,255,255,.06) }
.nav{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 16px; }
.logo{
  font-weight:900; letter-spacing:-.2px;
  background:linear-gradient(90deg,var(--brand),var(--accent) 60%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.nav a{ color:var(--text); text-decoration:none; padding:8px 12px; border-radius:999px; border:1px solid transparent }
.nav a:hover{ background:rgba(255,255,255,.06) }
.nav .active{ background:rgba(124,77,255,.16); color:var(--accent); border-color:var(--border) }

/* ============================= CARDS GENERIC ============================= */
.card{ background:var(--card); border:1px solid var(--border); border-radius:16px; padding:14px; box-shadow:var(--shadow); }
.card.head{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.grid-2{ display:grid; gap:14px; grid-template-columns:1fr 1fr }
.grid-3{ display:grid; gap:14px; grid-template-columns:repeat(3,1fr) }
@media (max-width:900px){ .grid-2,.grid-3{ grid-template-columns:1fr } }

/* ============================= HERO ============================= */
.hero{
  display:grid; grid-template-columns:1.2fr .8fr; gap:22px; align-items:center; min-height: clamp(360px, 58vh, 520px);
}
.hero-blob{
  position:relative; min-height:280px; border-radius:18px; overflow:hidden;
  border:1px solid var(--border); background:radial-gradient(520px 260px at 20% 30%, rgba(124,77,255,.22), transparent 60%), radial-gradient(520px 260px at 80% 70%, rgba(32,211,255,.18), transparent 60%);
}
.hero-blob::after{
  content:""; position:absolute; inset:-30%; background:conic-gradient(from 0deg, rgba(124,77,255,.18), rgba(32,211,255,.18), transparent 60%);
  filter:blur(18px); animation:spin 16s linear infinite;
}
@keyframes spin{ to{ transform:rotate(360deg) } }

/* ============================= FEATURE BLOCK ============================= */
.feature{ display:grid; gap:10px }
.feature .head{ display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap }
.feature .title{ display:flex; align-items:center; gap:10px }
.feature .title .em{ font-size:22px }
.activity{ margin-top:8px }
.split{ display:grid; gap:12px; grid-template-columns:1.1fr .9fr }
@media (max-width:900px){ .split{ grid-template-columns:1fr } }

/* ============================= TERMINAL/CMD ============================= */
.cmd{ background:#000; color:#d6e0ff; border-radius:14px; border:1px solid rgba(255,255,255,.12); overflow:hidden; position:relative; box-shadow:0 16px 40px rgba(0,0,0,.35); }
.cmd::before{ content:""; position:absolute; inset:-2px; border-radius:16px; background:conic-gradient(from 0deg, rgba(124,77,255,.25), rgba(32,211,255,.25), transparent 40%); filter:blur(18px); z-index:0; animation:spin 16s linear infinite; }
.cmd-inner{ position:relative; z-index:1; }
.cmd-head{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.08) }
.dots{ display:flex; gap:6px } .dot{ width:10px; height:10px; border-radius:50%; background:#ff5f56 } .dot:nth-child(2){ background:#ffbd2e } .dot:nth-child(3){ background:#27c93f }
.cmd-body{ max-height:220px; overflow:auto; padding:12px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:13px; line-height:1.45; }
.cmd-controls{ display:flex; gap:10px; padding:10px 12px; border-top:1px solid rgba(255,255,255,.08) }

/* ============================= WIDGETS ============================= */
.kpi-row{ display:grid; gap:12px; grid-template-columns:repeat(4,1fr) }
.kpi{ text-align:center; border:1px solid var(--border); border-radius:12px; padding:10px; background:var(--surface); }
.kpi b{ font-size:1.2rem; display:block }

.table{ width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; background:var(--card); border:1px solid var(--border); border-radius:12px; }
.table th,.table td{ padding:8px 10px; border-bottom:1px solid var(--border); font-size:.9rem }
.table th{ text-align:left; font-weight:800 } .table tr:last-child td{ border-bottom:0 }
.dotst{ display:inline-block; width:10px; height:10px; border-radius:50% }
.dot-ok{ background:var(--ok) } .dot-warn{ background:var(--warn) } .dot-err{ background:var(--err) }

/* ============================= CYBER CARDS ============================= */
.cyber{ display:grid; gap:14px; grid-template-columns:1fr 1fr }
@media (max-width:900px){ .cyber{ grid-template-columns:1fr } }

/* ============================= TOPOLOGY (algo top) ============================= */
.topology{ position:relative; border-radius:16px; overflow:hidden; border:1px solid var(--border); }
.topology canvas{ display:block; width:100%; height:380px; background:radial-gradient(600px 300px at 20% 20%, rgba(124,77,255,.14), transparent 60%), radial-gradient(600px 300px at 80% 80%, rgba(32,211,255,.12), transparent 60%) }
.top-cta{ display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:10px; padding:12px; border-top:1px solid var(--border); background:linear-gradient(180deg, rgba(124,77,255,.10), transparent) }

/* ============================= MINI F√ÅBRICA (rob√¥ construtor) ============================= */
.factory{ position:relative; border:1px solid var(--border); border-radius:14px; background:var(--surface); padding:10px; min-height:220px; overflow:hidden }
.conv{ position:absolute; left:10px; right:10px; bottom:16px; height:8px; background:linear-gradient(90deg, rgba(255,255,255,.18) 40%, transparent 40%); background-size:30px 8px; border-radius:6px; border:1px solid rgba(255,255,255,.12) }
.bot-mini{ position:absolute; top:60px; left:-40px; width:38px; height:38px; border-radius:8px; background:linear-gradient(90deg,var(--brand),var(--accent)); box-shadow:0 8px 20px rgba(0,0,0,.35) }
.arm{ position:absolute; left:50%; top:14px; width:120px; height:8px; margin-left:-60px; background:rgba(255,255,255,.18); transform-origin:0 50%; border-radius:6px; }
.claw{ position:absolute; right:-8px; top:-6px; width:0; height:0; border-left:12px solid rgba(32,211,255,.8); border-top:8px solid transparent; border-bottom:8px solid transparent; filter:drop-shadow(0 0 8px rgba(32,211,255,.5)); }

/* ============================= LINHA DE PRODU√á√ÉO ============================= */
.line-prod{ position:relative; border:1px dashed rgba(255,255,255,.18); border-radius:12px; padding:10px; overflow:hidden; min-height:120px; }
.capsule{ position:absolute; top:50%; transform:translateY(-50%); width:64px; height:28px; border-radius:999px; background:linear-gradient(90deg, rgba(124,77,255,.85), rgba(32,211,255,.85)); box-shadow:0 8px 20px rgba(0,0,0,.35) }

/* ============================= EXPERI√äNCIAS VISUAIS ============================= */
.fx-grid{ display:grid; gap:14px; grid-template-columns:repeat(2,1fr) }
@media (max-width:900px){ .fx-grid{ grid-template-columns:1fr } }
.fx-card{ position:relative; border:1px solid var(--border); border-radius:16px; overflow:hidden; background:var(--card) }
.fx-head{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px 12px; border-bottom:1px solid var(--border) }
.fx-body{ position:relative; height:220px; background:var(--surface) }
.fx-body canvas{ width:100%; height:100%; display:block }
.fx-aurora{ background:
  radial-gradient(800px 400px at 20% 30%, rgba(124,77,255,.25), transparent 60%),
  radial-gradient(800px 400px at 80% 70%, rgba(32,211,255,.20), transparent 60%);
  animation:aur 10s ease-in-out infinite alternate;
}
@keyframes aur{ from{ filter:hue-rotate(0deg) blur(8px)} to{ filter:hue-rotate(40deg) blur(10px)} }
</style>
</head>

<body>
<header>
  <nav class="nav container">
    <div class="logo">Carlos Henrique</div>
    <div style="display:flex; gap:8px; flex-wrap:wrap">
      <a href="index.html">In√≠cio</a>
      <a href="portfolio.html">Portf√≥lio</a>
      <a href="sobre.html">Sobre</a>
      <a class="active" href="projetos.html">Projetos</a>
      <a href="contato.html" class="btn primary">Contato</a>
    </div>
  </nav>
</header>

<main class="container">
  <!-- ============================= HERO ============================= -->
  <section class="section hero">
    <div>
      <h1>Projetos ‚Äî T.I. & Automa√ß√£o</h1>
      <p class="muted">Aux√≠lio t√©cnico completo: backend, automa√ß√µes, cria√ß√£o de m√°quinas, manuten√ß√£o, hospedagem e apps de apoio T.I. Tudo com foco em UI/UX e performance.</p>
      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px">
        <span class="badge">Backend</span>
        <span class="badge">Automa√ß√£o</span>
        <span class="badge">CFTV & Infra</span>
        <span class="badge">Cyber</span>
        <span class="badge">Apps</span>
      </div>
    </div>
    <div class="hero-blob" aria-hidden="true"></div>
  </section>

  <!-- ============================= BACKEND ============================= -->
  <section class="section feature" id="backend">
    <div class="card head">
      <div class="title"><span class="em">üß©</span><div><b>Backend</b><div class="muted">APIs est√°veis, filas e observabilidade</div></div></div>
      <a href="#cyber" class="btn small">Ver seguran√ßa ‚Üì</a>
    </div>
    <div class="activity">
      <div class="card split">
        <div>
          <h3>Monitor de API (tempo real)</h3>
          <p class="muted">Gr√°fico de RPS e p95 simulados; pausa e limpeza sem travar a p√°gina.</p>
          <div class="kpi-row" style="margin:8px 0">
            <div class="kpi"><small class="muted">RPS</small><b id="bk-rps">0</b></div>
            <div class="kpi"><small class="muted">p95 (ms)</small><b id="bk-p95">0</b></div>
            <div class="kpi"><small class="muted">Erros (1m)</small><b id="bk-err">0</b></div>
            <div class="kpi"><small class="muted">Uptime</small><b id="bk-up">99.98%</b></div>
          </div>
          <div style="display:flex; gap:8px; flex-wrap:wrap">
            <button id="bk-pause" class="btn small">‚è∏Ô∏è Pausar</button>
            <button id="bk-clear" class="btn small">üßπ Limpar</button>
          </div>
        </div>
        <div>
          <canvas id="bk-chart" height="220" style="width:100%; border:1px solid var(--border); border-radius:12px; background:var(--surface)"></canvas>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= AUTOMA√á√ÉO ============================= -->
  <section class="section feature" id="automacao">
    <div class="card head">
      <div class="title"><span class="em">‚öôÔ∏è</span><div><b>Automa√ß√£o de Tarefas</b><div class="muted">Rob√¥s cuidando de m√°quinas + workflows</div></div></div>
      <span class="badge">Orquestra√ß√£o</span>
    </div>
    <div class="activity">
      <div class="card split">
        <!-- Mini f√°brica: rob√¥ montando mini-rob√¥s -->
        <div class="factory" id="factory">
          <div class="arm"><div class="claw"></div></div>
          <div class="conv"></div>
          <!-- 3 bots que ser√£o ‚Äúnascidos‚Äù e empurrados -->
          <div class="bot-mini" id="botA" aria-hidden="true"></div>
          <div class="bot-mini" id="botB" aria-hidden="true" style="top:84px; left:-60px;"></div>
          <div class="bot-mini" id="botC" aria-hidden="true" style="top:108px; left:-80px;"></div>
          <p class="muted" style="position:absolute; top:10px; left:10px; margin:0">F√°brica: montagem de mini-rob√¥s que ir√£o monitorar as m√°quinas</p>
        </div>
        <!-- CMD de workflows (mantido) -->
        <div class="cmd">
          <div class="cmd-inner">
            <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>Workflow ‚Äî Execu√ß√µes</b></div>
            <div id="wf-body" class="cmd-body"></div>
            <div class="cmd-controls">
              <button id="wf-run" class="btn small">‚ñ∂Ô∏è Rodar Lote</button>
              <button id="wf-pause" class="btn small">‚è∏Ô∏è Pausar</button>
              <button id="wf-clear" class="btn small">üßπ Limpar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= CRIA√á√ÉO DE M√ÅQUINAS ============================= -->
  <section class="section feature" id="maquinas">
    <div class="card head">
      <div class="title"><span class="em">üõ†Ô∏è</span><div><b>Cria√ß√£o de M√°quinas</b><div class="muted">Linha de produ√ß√£o + simulador compacto</div></div></div>
      <span class="badge">Prototipagem</span>
    </div>
    <div class="activity">
      <div class="grid-2">
        <!-- Linha de produ√ß√£o animada -->
        <div class="card">
          <h3>Linha de Produ√ß√£o</h3>
          <p class="muted">C√°psulas atravessam a linha recebendo m√≥dulos.</p>
          <div class="line-prod" id="line-prod"></div>
        </div>
        <!-- Simulador compacto e animado -->
        <div class="card">
          <h3>Simulador de Montagem (compacto)</h3>
          <p class="muted">Checklist com micro-anima√ß√µes; finalize e ganhe confetes üòÑ</p>
          <div style="display:grid; gap:10px">
            <div id="mk-bar" style="height:12px; border-radius:10px; border:1px solid var(--border); background:linear-gradient(90deg, rgba(124,77,255,.20), transparent)"><div id="mk-fill" style="height:100%; width:0%; background:linear-gradient(90deg, var(--brand), var(--accent)); border-radius:10px"></div></div>
            <div class="grid-3" id="mk-list" style="grid-template-columns:repeat(2,1fr)"></div>
            <div style="display:flex; gap:8px; flex-wrap:wrap">
              <button id="mk-start" class="btn small">üöÄ Iniciar</button>
              <button id="mk-reset" class="btn small">‚Ü©Ô∏è Reset</button>
            </div>
            <canvas id="mk-confetti" height="80" style="width:100%; display:none"></canvas>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= MANUTEN√á√ÉO ============================= -->
  <section class="section feature" id="manutencao">
    <div class="card head">
      <div class="title"><span class="em">üß∞</span><div><b>Manuten√ß√£o de Pe√ßas & Equipamentos</b><div class="muted">Diagn√≥sticos e sa√∫de do parque</div></div></div>
      <span class="badge">Field Service</span>
    </div>
    <div class="activity">
      <div class="card">
        <div style="display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap">
          <h3 style="margin:0">Diagn√≥stico R√°pido</h3>
          <div>
            <button id="mt-scan" class="btn small">üîç Escanear</button>
            <button id="mt-reset" class="btn small">üßπ Limpar</button>
          </div>
        </div>
        <div style="overflow:auto; margin-top:8px">
          <table class="table">
            <thead><tr><th>Equipamento</th><th>Componente</th><th>Status</th><th>√öltima verifica√ß√£o</th></tr></thead>
            <tbody id="mt-body"></tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= HOSPEDAGEM ============================= -->
  <section class="section feature" id="hospedagem">
    <div class="card head">
      <div class="title"><span class="em">‚òÅÔ∏è</span><div><b>Configura√ß√£o & Hospedagem</b><div class="muted">CI/CD, deploy e observabilidade</div></div></div>
      <span class="badge">Cloud</span>
    </div>
    <div class="activity">
      <div class="card">
        <div class="cmd">
          <div class="cmd-inner">
            <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>Pipeline ‚Äî Deploy</b></div>
            <div id="dp-body" class="cmd-body"></div>
            <div class="cmd-controls">
              <button id="dp-run" class="btn small">üöÄ Build & Deploy</button>
              <button id="dp-clear" class="btn small">üßπ Limpar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= APPS PARA T.I. ============================= -->
  <section class="section feature" id="apps">
    <div class="card head">
      <div class="title"><span class="em">üì±</span><div><b>Aplicativos de Apoio T.I.</b><div class="muted">Ferramentas r√°pidas para o time</div></div></div>
      <span class="badge">Prototipagem √°gil</span>
    </div>
    <div class="activity">
      <div class="card">
        <h3>Launcher ‚Äî Apps internos</h3>
        <p class="muted">Clique para ‚Äúabrir‚Äù e ver um preview animado.</p>
        <div id="ap-grid" class="grid-3"></div>
      </div>
    </div>
  </section>

  <!-- ============================= CMD ‚Äî Bot WhatsApp ============================= -->
  <section class="section" id="zapbot">
    <div class="card head"><b>Cria√ß√£o de Bot ‚Äî WhatsApp</b><span class="badge">Sess√£o ‚Ä¢ Webhook ‚Ä¢ Teste</span></div>
    <div class="card">
      <div class="cmd">
        <div class="cmd-inner">
          <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>whatsapp-bot build</b></div>
          <div id="wa-body" class="cmd-body"></div>
          <div class="cmd-controls">
            <button id="wa-create" class="btn small">ü§ñ Criar Bot</button>
            <button id="wa-test" class="btn small">üí¨ Testar Mensagem</button>
            <button id="wa-publish" class="btn small">üåê Publicar Webhook</button>
            <button id="wa-clear" class="btn small">üßπ Limpar</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= CYBER SEGURAN√áA (2 CMDs) ============================= -->
  <section class="section" id="cyber">
    <div class="card head"><b>Cyber Seguran√ßa</b><span class="badge">SOC & Scanner</span></div>
    <div class="cyber">
      <!-- SOC -->
      <div class="cmd">
        <div class="cmd-inner">
          <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>SOC ‚Äî Eventos</b><span class="badge" id="soc-counts">info:0 ‚Ä¢ warn:0 ‚Ä¢ crit:0</span></div>
          <div id="soc-body" class="cmd-body"></div>
          <div class="cmd-controls">
            <button id="soc-pause" class="btn small">‚è∏Ô∏è Pausar</button>
            <button id="soc-clear" class="btn small">üßπ Limpar</button>
          </div>
        </div>
      </div>
      <!-- Scanner -->
      <div class="cmd">
        <div class="cmd-inner">
          <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>Scanner ‚Äî An√°lise</b><span class="badge" id="scn-counts">hosts:0 ‚Ä¢ vulns:0</span></div>
          <div id="scn-body" class="cmd-body"></div>
          <div class="cmd-controls">
            <button id="scn-scan" class="btn small">üîé Scan Sub-rede</button>
            <button id="scn-pause" class="btn small">‚è∏Ô∏è Pausar</button>
            <button id="scn-clear" class="btn small">üßπ Limpar</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= EXPERI√äNCIAS VISUAIS (5 tops) ============================= -->
  <section class="section" id="fx">
    <div class="card head"><b>Labs ‚Äî Experimentos Visuais</b><span class="badge">otimizados (pausa fora da tela)</span></div>
    <div class="fx-grid">
      <!-- Radar -->
      <div class="fx-card">
        <div class="fx-head"><b>Radar</b><span class="muted">Pulsos e ecos</span></div>
        <div class="fx-body"><canvas id="fx-radar"></canvas></div>
      </div>
      <!-- Flow Field -->
      <div class="fx-card">
        <div class="fx-head"><b>Flow Field</b><span class="muted">linhas org√¢nicas</span></div>
        <div class="fx-body"><canvas id="fx-flow"></canvas></div>
      </div>
      <!-- Code Rain -->
      <div class="fx-card">
        <div class="fx-head"><b>Code Rain</b><span class="muted">letras caindo</span></div>
        <div class="fx-body"><canvas id="fx-rain"></canvas></div>
      </div>
      <!-- Aurora l√≠quida (CSS, sem JS) -->
      <div class="fx-card">
        <div class="fx-head"><b>Aurora L√≠quida</b><span class="muted">CSS only</span></div>
        <div class="fx-body fx-aurora"></div>
      </div>
      <!-- √ìrbitas -->
      <div class="fx-card" style="grid-column:1 / -1">
        <div class="fx-head"><b>√ìrbitas</b><span class="muted">corpos girando</span></div>
        <div class="fx-body"><canvas id="fx-orbits"></canvas></div>
      </div>
    </div>
  </section>

  <!-- ============================= ALGO TOP ‚Äî Topologia animada ============================= -->
  <section class="section">
    <div class="topology card">
      <canvas id="topo"></canvas>
      <div class="top-cta">
        <div>
          <b>Topologia de Rede ‚Äî pulsos & lat√™ncia</b>
          <div class="muted">N√≥s com pulsos animados e reconex√£o autom√°tica ‚Äî s√≥ visual üòÑ</div>
        </div>
        <div style="display:flex; gap:8px; flex-wrap:wrap">
          <a class="btn primary" href="contato.html">Quero isso no meu projeto</a>
          <a class="btn" href="#backend">Explorar ‚Üë</a>
        </div>
      </div>
    </div>
  </section>
</main>

<footer class="container" style="padding:28px 0; color:var(--muted); text-align:center">
  ¬© 2025 Carlos Henrique ‚Äî Projetos & Automa√ß√£o
</footer>

<script>
/* Utils */
const $ = (s,doc=document)=>doc.querySelector(s);
const $$= (s,doc=document)=>Array.from(doc.querySelectorAll(s));
const rand = (a,b)=>Math.floor(Math.random()*(b-a+1))+a;

/* Reveal on view */
(() => {
  const io=new IntersectionObserver(ents=>ents.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('visible'); }),{threshold:.14});
  $$('.section').forEach(s=> io.observe(s));
})();

/* ============================= BACKEND ‚Äî gr√°fico simples ============================= */
(() => {
  const cv = $('#bk-chart'), rpsEl=$('#bk-rps'), p95El=$('#bk-p95'), errEl=$('#bk-err');
  const pauseBtn = $('#bk-pause'), clearBtn = $('#bk-clear');
  if(!cv) return;
  const ctx = cv.getContext('2d'); cv.width = cv.clientWidth; cv.height = 220;

  const maxPts = 90; // compacto
  const data = Array.from({length:maxPts}, ()=>({rps:0,p95:0,err:0}));
  let paused=false, errWin=0;

  function draw(){
    ctx.clearRect(0,0,cv.width,cv.height);
    const pad=16, w=cv.width- pad*2, h=cv.height - pad*2;
    ctx.translate(pad,pad);
    ctx.globalAlpha=.18; ctx.strokeStyle="#fff"; ctx.lineWidth=1;
    for(let i=0;i<=5;i++){ const y=(h/5)*i; ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(w,y); ctx.stroke(); }
    ctx.globalAlpha=1;
    const maxRps = 220, maxP = 1200;
    function line(arr, key, color){
      ctx.beginPath(); arr.forEach((p,i)=>{ const x = (i/(maxPts-1))*w; const y = h - (p[key]/(key==='rps'?maxRps:maxP))*h; i?ctx.lineTo(x,y):ctx.moveTo(x,y); });
      ctx.strokeStyle=color; ctx.lineWidth=2; ctx.stroke();
    }
    line(data,'rps','#20d3ff'); line(data,'p95','#7c4dff');
    data.forEach((p,i)=>{ if(p.err>0){ const x=(i/(maxPts-1))*w; ctx.strokeStyle='#ff6b6b'; ctx.beginPath(); ctx.moveTo(x,h-2); ctx.lineTo(x,h-10); ctx.stroke(); } });
    ctx.setTransform(1,0,0,1,0,0);
  }

  function tick(){
    if(paused) return;
    const rps = Math.max(0, Math.round(80 + Math.sin(Date.now()/900)*60 + rand(-10,30)));
    const p95 = Math.max(120, Math.round(480 + Math.cos(Date.now()/1100)*260 + rand(-40,60)));
    const err = Math.random()<0.08 ? 1 : 0;
    errWin += err;
    data.push({rps,p95,err}); if(data.length>maxPts) data.shift();
    rpsEl.textContent = rps; p95El.textContent = p95; errEl.textContent = errWin;
    draw();
  }
  setInterval(tick, 900);
  pauseBtn.addEventListener('click', ()=>{ paused=!paused; pauseBtn.textContent = paused ? '‚ñ∂Ô∏è Retomar' : '‚è∏Ô∏è Pausar'; });
  clearBtn.addEventListener('click', ()=>{ data.fill({rps:0,p95:0,err:0}); errWin=0; rpsEl.textContent='0'; p95El.textContent='0'; errEl.textContent='0'; draw(); });
  draw();
})();

/* ============================= AUTOMA√á√ÉO ‚Äî f√°brica + workflow logs ============================= */
(() => {
  // F√°brica
  const fac = $('#factory'); if(fac && window.gsap){
    const arm = fac.querySelector('.arm');
    const bots = ['#botA','#botB','#botC'].map(id => fac.querySelector(id));
    const tl = gsap.timeline({repeat:-1, defaults:{ease:'power1.inOut'}});
    tl.to(arm, {rotation:12, duration:.6})
      .to(arm, {rotation:-8, duration:.6})
      .to(arm, {rotation:0, duration:.4});
    // Esteira
    gsap.to(fac.querySelector('.conv'), {backgroundPositionX:'-30px', duration:.6, repeat:-1, ease:'none'});
    // Nascer e empurrar mini-bots
    bots.forEach((b, i)=>{
      const startX = -80 - i*20;
      gsap.set(b, {x:startX, scale:.7, opacity:.2});
      gsap.timeline({repeat:-1, delay:i*.8})
        .to(b, {x:20, opacity:1, duration:.6})
        .to(b, {x:fac.clientWidth-80, duration:2.2})
        .to(b, {opacity:0, duration:.2})
        .set(b, {x:startX, opacity:.2});
    });
  }

  // Workflow CMD (mantido + pausa)
  const body=$('#wf-body'), run=$('#wf-run'), pause=$('#wf-pause'), clear=$('#wf-clear');
  if(!body) return;
  let paused=false, pulse=null;

  const steps = [
    ()=>`üß≠ Start workflow ‚Ä¢ job=${rand(1000,9999)}`,
    ()=>`üì• Fetch API /leads ‚Ä¢ 200 OK ‚Ä¢ ${rand(1,9)}.${rand(0,9)}k rows`,
    ()=>`üßπ Normalize fields ‚Ä¢ map: 7 colunas`,
    ()=>`üîÅ Deduplicate ‚Ä¢ kept=${rand(80,98)}%`,
    ()=>`üì§ Push to CRM ‚Ä¢ upserts=${rand(30,120)}`,
    ()=>`üîî Notify channel ‚Ä¢ ack=true`,
    ()=>`‚úÖ Done in ${rand(2,9)}s`
  ];
  function addLine(t){ const p=document.createElement('div'); p.textContent = `[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${t}`; body.appendChild(p); body.scrollTop = body.scrollHeight; if(window.gsap){ gsap.from(p,{y:8,opacity:0,duration:.22}); } }
  function runOnce(){ steps.forEach(fn=> addLine(fn())); }
  run.addEventListener('click', runOnce);
  pause.addEventListener('click', ()=>{ paused=!paused; pause.textContent= paused? '‚ñ∂Ô∏è Retomar':'‚è∏Ô∏è Pausar'; if(paused){ clearInterval(pulse); pulse=null; } else { pulse=setInterval(()=> addLine(steps[rand(0,steps.length-1)]()), 1400); } });
  clear.addEventListener('click', ()=>{ body.innerHTML=''; });
  pulse = setInterval(()=>{ if(!paused) addLine(steps[rand(0,steps.length-1)]()); }, 1600);
})();

/* ============================= M√ÅQUINAS ‚Äî linha de produ√ß√£o + simulador ============================= */
(() => {
  // Linha de produ√ß√£o
  const line = $('#line-prod');
  if(line && window.gsap){
    const makeCaps = n=>{
      for(let i=0;i<n;i++){
        const c = document.createElement('div');
        c.className='capsule';
        c.style.left = (-80 - i*140) + 'px';
        line.appendChild(c);
        gsap.to(c,{x: line.clientWidth + 200, duration:6 + i, repeat:-1, ease:'none',
          onUpdate(){
            const mid = (c.getBoundingClientRect().left + c.offsetWidth/2) - line.getBoundingClientRect().left;
            c.style.filter = `drop-shadow(0 0 10px rgba(32,211,255,${Math.max(0,.6 - Math.abs(mid-line.clientWidth/2)/line.clientWidth)}))`;
          }
        });
      }
    };
    makeCaps(4);
  }

  // Simulador compacto
  const fill=$('#mk-fill'), list=$('#mk-list'), start=$('#mk-start'), reset=$('#mk-reset'), conf=$('#mk-confetti');
  if(!fill || !list) return;
  const comps = ['Placa l√≥gica','M√≥dulo motor','Garra v√°cuo','Sensor √≥ptico','Controlador','Firmware'];
  const state = comps.map(n=>({name:n, ok:false}));

  function render(){
    list.innerHTML='';
    state.forEach((c,i)=>{
      const card=document.createElement('div'); card.className='card'; card.style.minHeight='58px';
      card.innerHTML=`<b>${c.name}</b><div class="muted">${c.ok?'Instalado':'Pendente'}</div>`;
      card.style.borderColor = c.ok ? 'rgba(0,230,209,.45)' : 'var(--border)';
      list.appendChild(card);
      if(c.ok && window.gsap){ gsap.from(card,{scale:.96, filter:'brightness(1.2)', duration:.25}); }
    });
  }
  function progressTo(p){ fill.style.width = Math.max(0,Math.min(100,p)) + '%'; }
  function confetti(){
    const cv=conf, ctx=cv.getContext('2d'); conf.style.display='block';
    const W=cv.width=cv.clientWidth, H=cv.height; let parts=Array.from({length:60},()=>({x:rand(0,W),y:rand(-40,0),vx:(Math.random()-.5)*1.2,vy:1+Math.random()*2,s:2+Math.random()*3}));
    let running=true;
    function tick(){
      ctx.clearRect(0,0,W,H);
      parts.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; ctx.fillStyle=`hsl(${rand(180,260)},80%,60%)`; ctx.fillRect(p.x,p.y,p.s,p.s); });
      parts = parts.filter(p=>p.y<H+10);
      if(parts.length && running) requestAnimationFrame(tick); else { conf.style.display='none'; }
    } tick(); setTimeout(()=> running=false, 1200);
  }
  function runAssembly(){
    let done=0; const order=[...state.keys()].sort(()=>Math.random()-.5);
    const step=()=>{ const idx = order[done]; if(idx===undefined) return;
      state[idx].ok=true; done++; progressTo(Math.round((done/state.length)*100)); render();
      if(done<state.length) setTimeout(step, 260); else confetti();
    };
    step();
  }
  start.addEventListener('click', runAssembly);
  reset.addEventListener('click', ()=>{ state.forEach(c=>c.ok=false); progressTo(0); render(); });
  render();
})();

/* ============================= MANUTEN√á√ÉO ‚Äî tabela (compacta) ============================= */
(() => {
  const body=$('#mt-body'), scan=$('#mt-scan'), reset=$('#mt-reset');
  if(!body) return;
  const equips = ['Servidor RACK-01','Switch CORE-02','Notebook SUP-14','C√¢mera CFTV-07','NVR-02','Impressora LAB-3','Desktop DEV-11','AP WiFi-05'];
  const parts = ['CPU','RAM','Disco','Rede','Fonte','Ventoinha','Firmware','Sensor'];
  let rows=[];

  function status(){ const r=Math.random(); if(r<0.70) return ['OK','ok']; if(r<0.90) return ['Aten√ß√£o','warn']; return ['Falha','err']; }
  function now(){ return new Date().toLocaleTimeString('pt-BR',{hour12:false}); }
  function render(){ body.innerHTML=''; rows.forEach(r=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${r.eq}</td><td>${r.part}</td><td><span class="dotst dot-${r.kind}"></span> ${r.st}</td><td>${r.at}</td>`; body.appendChild(tr); }); }
  function doScan(){ rows = Array.from({length:6},()=> { const eq = equips[rand(0,equips.length-1)]; const part = parts[rand(0,parts.length-1)]; const [st,kind]=status(); return {eq,part,st,kind,at:now()}; }); render(); }
  scan.addEventListener('click', doScan);
  reset.addEventListener('click', ()=>{ rows=[]; render(); });
  doScan();
})();

/* ============================= HOSPEDAGEM ‚Äî deploy ============================= */
(() => {
  const body=$('#dp-body'), run=$('#dp-run'), clear=$('#dp-clear');
  if(!body) return;
  const steps = ['Checkout main','Install deps','Lint/Tests','Build','Dockerize','Push image','Deploy','Smoke tests','Done ‚úÖ'];
  function addLine(t){ const p=document.createElement('div'); p.textContent = `[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${t}`; body.appendChild(p); body.scrollTop=body.scrollHeight; if(window.gsap){ gsap.from(p,{y:8,opacity:0,duration:.2}); } }
  run.addEventListener('click', async ()=>{ body.innerHTML=''; for(const s of steps){ await new Promise(r=>setTimeout(r, rand(200,700))); addLine(s); } });
  clear.addEventListener('click', ()=> body.innerHTML='');
})();

/* ============================= APPS ‚Äî launcher ============================= */
(() => {
  const grid=$('#ap-grid'); if(!grid) return;
  const apps=[
    {name:'Invent√°rio R√°pido', desc:'Escaneie itens e gere planilhas.'},
    {name:'Checklist T√©cnico', desc:'Procedimentos e fotos.'},
    {name:'Mapa de Rede', desc:'Descoberta e anota√ß√µes.'},
    {name:'Diagn√≥stico OS', desc:'Logs e relat√≥rios.'},
    {name:'Controle de Acesso', desc:'Visitantes e crach√°s.'},
    {name:'Painel de Chamados', desc:'SLA e m√©tricas.'}
  ];
  apps.forEach(a=>{
    const card=document.createElement('div'); card.className='card'; card.style.cursor='pointer';
    card.innerHTML=`<b>${a.name}</b><div class="muted">${a.desc}</div>`;
    card.addEventListener('click', ()=>{
      const modal=document.createElement('div');
      modal.className='card'; modal.style.position='fixed'; modal.style.zIndex='60';
      modal.style.left='50%'; modal.style.top='50%'; modal.style.transform='translate(-50%,-50%)';
      modal.style.maxWidth='560px'; modal.style.width='92vw';
      modal.innerHTML=`<div class="head"><b>${a.name} ‚Äî Preview</b><button class="btn small" id="ap-close">Fechar</button></div>
      <div style="margin-top:8px">
        <div class="kpi-row">
          <div class="kpi"><small class="muted">A√ß√µes</small><b>${rand(4,22)}</b></div>
          <div class="kpi"><small class="muted">Itens</small><b>${rand(10,120)}</b></div>
          <div class="kpi"><small class="muted">Equipe</small><b>${rand(2,8)}</b></div>
          <div class="kpi"><small class="muted">Status</small><b>Beta</b></div>
        </div>
        <div class="cmd" style="margin-top:10px">
          <div class="cmd-inner">
            <div class="cmd-head"><div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div><b>Logs</b></div>
            <div class="cmd-body" id="ap-log"></div>
          </div>
        </div>
      </div>`;
      document.body.appendChild(modal);
      if(window.gsap){ gsap.from(modal,{y:20,opacity:0,scale:.98,duration:.25}); }
      modal.querySelector('#ap-close').addEventListener('click', ()=> modal.remove());
      const apLog = modal.querySelector('#ap-log');
      ['init','load-config','connect-db','ready'].forEach((s,i)=> setTimeout(()=>{ const p=document.createElement('div'); p.textContent = `[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${s}`; apLog.appendChild(p); apLog.scrollTop=apLog.scrollHeight; }, 220*i));
    });
    grid.appendChild(card);
  });
})();

/* ============================= CMD ‚Äî WhatsApp Bot ============================= */
(() => {
  const body=$('#wa-body'), create=$('#wa-create'), test=$('#wa-test'), pub=$('#wa-publish'), clear=$('#wa-clear');
  if(!body) return;
  const time = ()=> new Date().toLocaleTimeString('pt-BR',{hour12:false});
  const log = t => { const p=document.createElement('div'); p.textContent = `[${time()}] ${t}`; body.appendChild(p); body.scrollTop=body.scrollHeight; if(window.gsap){ gsap.from(p,{y:8,opacity:0,duration:.2}); } };
  create.addEventListener('click', async ()=>{
    log('Criando sess√£o‚Ä¶'); await new Promise(r=>setTimeout(r,400));
    log('Gerando QR Code‚Ä¶ (simulado)'); await new Promise(r=>setTimeout(r,500));
    log('Sess√£o vinculada ‚úÖ'); log('Salvando credenciais criptografadas‚Ä¶ ok');
  });
  test.addEventListener('click', async ()=>{
    log('Enviando mensagem de teste para +55 43 ****-****‚Ä¶'); await new Promise(r=>setTimeout(r,500));
    log('Webhook recebeu evento MESSAGE_DELIVERED ‚úÖ');
  });
  pub.addEventListener('click', async ()=>{
    log('Publicando webhook em /whats/webhook ‚Ä¶'); await new Promise(r=>setTimeout(r,500));
    log('Verifica√ß√£o de token ok ‚Ä¢ status 200'); log('Bot pronto üéâ');
  });
  clear.addEventListener('click', ()=> body.innerHTML='');
})();

/* ============================= CYBER ‚Äî SOC ============================= */
(() => {
  const body=$('#soc-body'), pause=$('#soc-pause'), clear=$('#soc-clear'), badge=$('#soc-counts');
  if(!body) return;
  let paused=false, counts={info:0,warn:0,crit:0};
  const geo = ['BR','US','DE','RU','CN','AR','MX','FR','IN','NL','PT','ES','JP','GB'];
  const sev = [{k:'info', tag:'INFO', icon:'‚ÑπÔ∏è', w:62},{k:'warn', tag:'WARN', icon:'‚ö†Ô∏è', w:28},{k:'crit', tag:'CRIT', icon:'üõë', w:10}];
  const totalW = sev.reduce((a,b)=>a+b.w,0);
  function pickSev(){ let r=Math.random()*totalW,acc=0; for(const s of sev){ acc+=s.w; if(r<=acc) return s; } return sev[0]; }
  function line(){
    const s = pickSev();
    const msgPool = {
      info: [()=>`${s.icon} ${s.tag} ‚Ä¢ Login bem-sucedido ‚Ä¢ user=alice ‚Ä¢ src=${geo[rand(0,geo.length-1)]}`,()=>`${s.icon} ${s.tag} ‚Ä¢ Chk firewall rules OK ‚Ä¢ 142 regras ativas`,()=>`${s.icon} ${s.tag} ‚Ä¢ Backup finalizado ‚Ä¢ sha256 ok`],
      warn: [()=>`${s.icon} ${s.tag} ‚Ä¢ Tentativas de login elevadas ‚Ä¢ user=bob ‚Ä¢ src=${geo[rand(0,geo.length-1)]}`,()=>`${s.icon} ${s.tag} ‚Ä¢ Port scan detectado ‚Ä¢ src=${geo[rand(0,geo.length-1)]} ‚Ä¢ 42 portas`,()=>`${s.icon} ${s.tag} ‚Ä¢ E-mail suspeito em quarentena`],
      crit: [()=>`${s.icon} ${s.tag} ‚Ä¢ IDS: assinatura match ‚Ä¢ CVE-20${rand(10,25)}-${rand(1000,9999)}`,()=>`${s.icon} ${s.tag} ‚Ä¢ Ransomware hash visto ‚Ä¢ bloqueio imediato`,()=>`${s.icon} ${s.tag} ‚Ä¢ Exfiltra√ß√£o poss√≠vel ‚Ä¢ throttling aplicado`]
    };
    const arr = s.k==='warn' ? msgPool.warn : s.k==='crit' ? msgPool.crit : msgPool.info;
    const p=document.createElement('div'); p.textContent = `[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${arr[rand(0,arr.length-1)]()}`;
    body.appendChild(p); body.scrollTop = body.scrollHeight;
    counts[s.k]++; badge.textContent = `info:${counts.info} ‚Ä¢ warn:${counts.warn} ‚Ä¢ crit:${counts.crit}`;
    if(window.gsap){ gsap.from(p,{y:8,opacity:0,duration:.2}); }
  }
  const int = setInterval(()=>{ if(!paused) line(); }, 1100);
  pause.addEventListener('click', ()=>{ paused=!paused; pause.textContent= paused?'‚ñ∂Ô∏è Retomar':'‚è∏Ô∏è Pausar'; });
  clear.addEventListener('click', ()=>{ body.innerHTML=''; counts={info:0,warn:0,crit:0}; badge.textContent=`info:0 ‚Ä¢ warn:0 ‚Ä¢ crit:0`; });
})();

/* ============================= CYBER ‚Äî Scanner ============================= */
(() => {
  const body=$('#scn-body'), scan=$('#scn-scan'), pause=$('#scn-pause'), clear=$('#scn-clear'), badge=$('#scn-counts');
  if(!body) return;
  let paused=false, hosts=0, vulns=0, timer=null;
  const cves = ['CVE-2021-44228','CVE-2023-23397','CVE-2024-3094','CVE-2022-22965','CVE-2019-0708'];
  const ports = [22,80,443,445,3306,5432,6379,8080,9000,27017];
  function log(t){ const p=document.createElement('div'); p.textContent = `[${new Date().toLocaleTimeString('pt-BR',{hour12:false})}] ${t}`; body.appendChild(p); body.scrollTop=body.scrollHeight; if(window.gsap){ gsap.from(p,{y:8,opacity:0,duration:.2}); } }
  function updateBadge(){ badge.textContent = `hosts:${hosts} ‚Ä¢ vulns:${vulns}`; }
  function runScan(){
    if(timer) clearInterval(timer);
    hosts=0; vulns=0; body.innerHTML=''; updateBadge();
    const subnet = `10.${rand(0,255)}.${rand(0,255)}.0/24`;
    log(`Iniciando varredura em ${subnet}‚Ä¶`);
    let i=1;
    timer = setInterval(()=>{
      if(paused) return;
      if(i>28){ log('Scan conclu√≠do ‚úÖ'); clearInterval(timer); timer=null; return; }
      const ip = `10.${rand(0,255)}.${rand(0,255)}.${rand(1,254)}`;
      const open = ports.filter(()=>Math.random()<0.22).slice(0,rand(1,4));
      log(`Host ${ip} ‚Ä¢ portas abertas: [${open.join(', ')}]`);
      hosts++;
      if(Math.random()<0.25){ const c = cves[rand(0,cves.length-1)]; log(`‚ö†Ô∏è Vulnerabilidade detectada ‚Ä¢ ${c} ‚Ä¢ host=${ip}`); vulns++; }
      updateBadge(); i++;
    }, 220);
  }
  scan.addEventListener('click', runScan);
  pause.addEventListener('click', ()=>{ paused=!paused; pause.textContent= paused?'‚ñ∂Ô∏è Retomar':'‚è∏Ô∏è Pausar'; });
  clear.addEventListener('click', ()=>{ body.innerHTML=''; hosts=0; vulns=0; updateBadge(); if(timer){ clearInterval(timer); timer=null; } });
})();

/* ============================= EXPERI√äNCIAS VISUAIS ‚Äî start/stop por visibilidade ============================= */
function makeVisRunner(el, start, stop){
  const io = new IntersectionObserver(ents=>{
    ents.forEach(e=>{ if(e.isIntersecting) start(); else stop && stop(); });
  },{threshold:.2});
  io.observe(el);
}

/* Radar */
(() => {
  const cv=$('#fx-radar'); if(!cv) return;
  const ctx=cv.getContext('2d'); let run=false, rafId=null; let t=0;
  function size(){ cv.width=cv.clientWidth; cv.height=cv.clientHeight; }
  size(); addEventListener('resize', size);
  function tick(){
    if(!run) return;
    const w=cv.width,h=cv.height,cx=w/2,cy=h/2; t+=0.02;
    ctx.clearRect(0,0,w,h);
    ctx.fillStyle='#081226'; ctx.fillRect(0,0,w,h);
    // grid circles
    ctx.strokeStyle='rgba(137,201,255,.25)'; for(let r=40;r<Math.min(w,h)/2;r+=40){ ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2); ctx.stroke(); }
    // sweep
    const ang=t% (Math.PI*2); const rMax=Math.min(w,h)/2;
    const grad=ctx.createRadialGradient(cx,cy,0,cx,cy,rMax);
    grad.addColorStop(0,'rgba(32,211,255,.35)'); grad.addColorStop(1,'transparent');
    ctx.fillStyle=grad; ctx.beginPath(); ctx.moveTo(cx,cy); ctx.arc(cx,cy,rMax,ang,ang+0.6); ctx.closePath(); ctx.fill();
    // blips
    for(let i=0;i<8;i++){ const a=i*(Math.PI*2/8)+t*.4; const r=60+ (i*20); const x=cx+Math.cos(a)*r, y=cy+Math.sin(a)*r;
      ctx.fillStyle='rgba(124,77,255,.9)'; ctx.beginPath(); ctx.arc(x,y,3,0,Math.PI*2); ctx.fill();
    }
    rafId=requestAnimationFrame(tick);
  }
  makeVisRunner(cv, ()=>{ if(!run){ run=true; tick(); } }, ()=>{ run=false; cancelAnimationFrame(rafId); });
})();

/* Flow Field */
(() => {
  const cv=$('#fx-flow'); if(!cv) return; const ctx=cv.getContext('2d'); let run=false, rafId=null; let z=0;
  function size(){ cv.width=cv.clientWidth; cv.height=cv.clientHeight; } size(); addEventListener('resize', size);
  function noise(x,y,z){ return Math.sin(x*.013+z)*Math.cos(y*.011+z); }
  function tick(){
    if(!run) return;
    const w=cv.width,h=cv.height; z+=0.006; ctx.fillStyle='rgba(13,21,52,.32)'; ctx.fillRect(0,0,w,h);
    ctx.lineWidth=1; for(let y=0;y<h;y+=8){ for(let x=0;x<w;x+=8){ const a=noise(x,y,z)*Math.PI*2; const x2=x+Math.cos(a)*6, y2=y+Math.sin(a)*6;
      ctx.strokeStyle='rgba(137,201,255,.35)'; ctx.beginPath(); ctx.moveTo(x,y); ctx.lineTo(x2,y2); ctx.stroke(); } }
    rafId=requestAnimationFrame(tick);
  }
  makeVisRunner(cv, ()=>{ if(!run){ run=true; tick(); } }, ()=>{ run=false; cancelAnimationFrame(rafId); });
})();

/* Code Rain */
(() => {
  const cv=$('#fx-rain'); if(!cv) return; const ctx=cv.getContext('2d'); let timer=null, run=false;
  const chars='„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥ÔΩ±ÔΩ≤ÔΩ≥ÔΩ¥ÔΩµÔΩ∂ÔΩ∑ÔΩ∏ÔΩπÔΩ∫0123456789ABCDEF';
  function size(){ cv.width=cv.clientWidth; cv.height=cv.clientHeight; } size(); addEventListener('resize', size);
  function start(){ if(run) return; run=true; const cols=Math.floor(cv.width/14); const drops=Array(cols).fill(0);
    timer=setInterval(()=>{ ctx.fillStyle='rgba(8,18,38,.35)'; ctx.fillRect(0,0,cv.width,cv.height);
      ctx.fillStyle='#7c4dff'; ctx.font='14px monospace';
      for(let i=0;i<drops.length;i++){ const ch = chars.charAt(rand(0,chars.length-1)); const x=i*14; const y=drops[i]*14;
        ctx.fillText(ch,x,y); if(y>cv.height && Math.random()>0.975) drops[i]=0; drops[i]++; }
    }, 50);
  }
  function stop(){ run=false; clearInterval(timer); }
  makeVisRunner(cv, start, stop);
})();

/* √ìrbitas */
(() => {
  const cv=$('#fx-orbits'); if(!cv) return; const ctx=cv.getContext('2d'); let run=false, rafId=null; let t=0;
  function size(){ cv.width=cv.clientWidth; cv.height=cv.clientHeight; } size(); addEventListener('resize', size);
  function tick(){
    if(!run) return;
    const w=cv.width,h=cv.height,cx=w/2,cy=h/2; t+=0.01;
    ctx.clearRect(0,0,w,h); ctx.fillStyle='#0c1536'; ctx.fillRect(0,0,w,h);
    const orbs=[60,90,120]; orbs.forEach((r,i)=>{ ctx.strokeStyle='rgba(255,255,255,.12)'; ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2); ctx.stroke();
      const a=t*(i+1); const x=cx+Math.cos(a)*r, y=cy+Math.sin(a)*r;
      ctx.fillStyle=i===2?'#7c4dff':'#20d3ff'; ctx.beginPath(); ctx.arc(x,y,6-i,0,Math.PI*2); ctx.fill();
    });
    rafId=requestAnimationFrame(tick);
  }
  makeVisRunner(cv, ()=>{ if(!run){ run=true; tick(); } }, ()=>{ run=false; cancelAnimationFrame(rafId); });
})();

/* ============================= TOPOLOGY ‚Äî network pulses ============================= */
(() => {
  const cv=$('#topo'); if(!cv) return;
  const ctx=cv.getContext('2d');
  function size(){ cv.width=cv.clientWidth; cv.height=380; }
  size(); addEventListener('resize', size);
  const nodes = Array.from({length:18}, ()=>({ x:Math.random()*cv.width, y:Math.random()*cv.height, vx:(Math.random()-.5)*.6, vy:(Math.random()-.5)*.6, r: rand(3,5) }));
  function step(){
    ctx.clearRect(0,0,cv.width,cv.height);
    // edges
    for(let i=0;i<nodes.length;i++){
      for(let j=i+1;j<nodes.length;j++){
        const a=nodes[i], b=nodes[j];
        const dx=a.x-b.x, dy=a.y-b.y, d=Math.hypot(dx,dy);
        if(d<160){
          ctx.strokeStyle=`rgba(137,201,255,${1-d/160})`;
          ctx.lineWidth=1; ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke();
        }
      }
    }
    // nodes
    nodes.forEach(n=>{
      ctx.beginPath(); ctx.arc(n.x,n.y,n.r,0,Math.PI*2);
      ctx.fillStyle='rgba(124,77,255,.85)'; ctx.fill();
      ctx.beginPath(); ctx.arc(n.x,n.y,n.r+3,0,Math.PI*2);
      ctx.strokeStyle='rgba(32,211,255,.35)'; ctx.stroke();

      n.x+=n.vx; n.y+=n.vy;
      if(n.x<0||n.x>cv.width) n.vx*=-1;
      if(n.y<0||n.y>cv.height) n.vy*=-1;
    });
    requestAnimationFrame(step);
  }
  step();
})();
</script>
</body>
</html>
